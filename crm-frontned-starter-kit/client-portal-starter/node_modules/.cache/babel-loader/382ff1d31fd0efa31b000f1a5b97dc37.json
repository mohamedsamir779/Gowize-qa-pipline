{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Button,Modal}from\"reactstrap\";import{withTranslation}from\"react-i18next\";import CardWrapper from\"components/Common/CardWrapper\";import AuthCode from\"react-auth-code-input\";import{useDispatch,useSelector}from\"react-redux\";import{verify2FACodeStart}from\"store/general/auth/twoFactorAuth/actions\";import{toggleCurrentModal}from\"store/actions\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TwoFactorAuth(props){const[twoFACode,setTwoFACode]=useState();const{verifyCode}=useSelector(state=>state.twoFactorAuthReducer);const dispatch=useDispatch();const focusInput2FA=digits=>{var _activeInputs,_inputs;const activeInputs=document.querySelectorAll(\".twofa-input.active\");const inputs=document.querySelectorAll(\".twofa-input\");if(activeInputs.length>digits.toString().length)(_activeInputs=activeInputs[activeInputs.length-1])===null||_activeInputs===void 0?void 0:_activeInputs.classList.remove(\"active\");else(_inputs=inputs[digits.toString().length-1])===null||_inputs===void 0?void 0:_inputs.classList.add(\"active\");setTwoFACode(digits);if(digits.length===6)verify(digits);};const verify=async code=>{dispatch(verify2FACodeStart({token:code||twoFACode,email:props.email&&props.email.toLowerCase(),history:props.history,type:props.type}));};useEffect(()=>{if(verifyCode.error&&verifyCode.error.length>0)setTwoFACode(\"\");},[verifyCode.error]);return/*#__PURE__*/_jsxs(Modal,{isOpen:props.isOpen,toggle:props.toggleOpen,centered:true,size:\"xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title mt-0\",children:props.t(\"Verify two factor authenication\")}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{dispatch(toggleCurrentModal(\"\"));},className:\"close btn btn-soft-dark waves-effect waves-light btn-rounded m-4\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3\",children:props.t(\"Enter Six-Digit Code\")}),/*#__PURE__*/_jsx(CardWrapper,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AuthCode,{characters:6,className:\"form-control form-control-lg text-center w-100\",allowedCharacters:\"^[0-9]\",containerClassName:\"twofa-container\",inputClassName:\"twofa-input\",onChange:a=>{focusInput2FA(a);}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(Button,{disabled:verifyCode.loading,className:\"btn btn-danger btn-sm w-lg\",onClick:()=>{verify();},children:props.t(\"Verify\")})})]})]});}export default withTranslation()(TwoFactorAuth);","map":{"version":3,"names":["React","useEffect","useState","Button","Modal","withTranslation","CardWrapper","AuthCode","useDispatch","useSelector","verify2FACodeStart","toggleCurrentModal","jsx","_jsx","jsxs","_jsxs","TwoFactorAuth","props","twoFACode","setTwoFACode","verifyCode","state","twoFactorAuthReducer","dispatch","focusInput2FA","digits","_activeInputs","_inputs","activeInputs","document","querySelectorAll","inputs","length","toString","classList","remove","add","verify","code","token","email","toLowerCase","history","type","error","isOpen","toggle","toggleOpen","centered","size","children","className","t","onClick","characters","allowedCharacters","containerClassName","inputClassName","onChange","a","disabled","loading"],"sources":["/home/ubuntu/Gowize-qa-pipline/client-portal-starter/src/components/TwoFactorAuth/index.js"],"sourcesContent":["import React, {\n  useEffect,\n  useState\n} from \"react\";\nimport {\n  Button,\n  Modal,\n} from \"reactstrap\";\nimport { withTranslation } from \"react-i18next\";\nimport CardWrapper from \"components/Common/CardWrapper\";\nimport AuthCode from \"react-auth-code-input\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { verify2FACodeStart } from \"store/general/auth/twoFactorAuth/actions\";\nimport { toggleCurrentModal } from \"store/actions\";\n\n  \nfunction TwoFactorAuth(props) {\n  const [twoFACode, setTwoFACode] = useState();\n  const { verifyCode } = useSelector(state=>state.twoFactorAuthReducer);\n  const dispatch = useDispatch();\n  const focusInput2FA = (digits) => {\n    const activeInputs = document.querySelectorAll(\".twofa-input.active\");\n    const inputs = document.querySelectorAll(\".twofa-input\");\n    if (activeInputs.length > digits.toString().length)\n      activeInputs[activeInputs.length - 1]?.classList.remove(\"active\");\n    else\n      inputs[digits.toString().length - 1]?.classList.add(\"active\");\n    setTwoFACode(digits);\n    if (digits.length === 6) verify(digits);\n  };\n  const verify = async (code) => {\n    dispatch(verify2FACodeStart({\n      token: code || twoFACode,\n      email: props.email && props.email.toLowerCase(),\n      history: props.history,\n      type: props.type,\n    }));\n  };\n\n  useEffect(()=>{\n    if (verifyCode.error && verifyCode.error.length > 0)\n      setTwoFACode(\"\");\n  }, [verifyCode.error]);\n\n  return (\n    <Modal\n      isOpen={props.isOpen}\n      toggle={props.toggleOpen}\n      centered={true}\n      size=\"xl\"\n    >\n      <div className=\"modal-header\">\n        <h5 className=\"modal-title mt-0\">{props.t(\"Verify two factor authenication\")}</h5>\n        <button\n          type=\"button\"\n          onClick={() => {\n            dispatch(toggleCurrentModal(\"\"));\n          }}\n          className=\"close btn btn-soft-dark waves-effect waves-light btn-rounded m-4\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\"\n        >\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div className=\"modal-body\">\n        <h1 className=\"mb-3\">{props.t(\"Enter Six-Digit Code\")}</h1>\n        <CardWrapper>\n          <div>\n            <AuthCode\n              characters={6}\n              className=\"form-control form-control-lg text-center w-100\"\n              allowedCharacters=\"^[0-9]\"\n              containerClassName=\"twofa-container\"\n              inputClassName=\"twofa-input\"\n              onChange={(a) => { focusInput2FA(a) }}></AuthCode>\n          </div>\n        </CardWrapper>\n        <div className=\"text-center mt-3\">\n          <Button disabled={verifyCode.loading} className=\"btn btn-danger btn-sm w-lg\" onClick={()=>{\n            verify();\n          }}>{props.t(\"Verify\")}</Button>\n        </div>\n      \n      </div>\n    </Modal>\n  );\n}\nexport default withTranslation()(TwoFactorAuth);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}