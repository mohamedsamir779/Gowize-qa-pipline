{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/king/portal/client-portal-starter/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/* eslint-disable object-property-newline */import{useState,useEffect,useContext}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Dropdown,DropdownToggle,DropdownMenu,DropdownItem}from\"reactstrap\";import CardWrapper from\"components/Common/CardWrapper\";import Loader from\"components/Common/Loader\";import Chart from\"./Chart\";import{fetchOHLCV}from\"store/actions\";import SocketContext from\"../../../context/context\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TIMEFRAMES=[{key:\"1m\",value:60},{key:\"5m\",value:300},{key:\"15m\",value:900},{key:\"30m\",value:1800},{key:\"1h\",value:3600},{key:\"4h\",value:14400},{key:\"6h\",value:21600},{key:\"12h\",value:43200},{key:\"1d\",value:86400},{key:\"1w\",value:604800},{key:\"1M\",value:241920}];const ChartContainer=_ref=>{let{selectedMarket}=_ref;const{state,setState}=useContext(SocketContext);const{klines,loading}=useSelector(state=>state.crypto.klines);const[dropdownOpen,setDropdownOpen]=useState(false);const toggle=()=>setDropdownOpen(prevState=>!prevState);const[timeframe,setTimeframe]=useState(TIMEFRAMES[2]);// 15m\n// init socket state symbol with selected symbol\nuseEffect(()=>{setState(_objectSpread(_objectSpread({},state),{},{klines:{symbol:selectedMarket,data:[]}}));},[selectedMarket]);const dispatch=useDispatch();useEffect(()=>{dispatch(fetchOHLCV({symbol:selectedMarket,timeframe:timeframe.key}));},[selectedMarket,timeframe]);return/*#__PURE__*/_jsx(CardWrapper,{className:\"p-2\",children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-1 d-inline-block\",children:/*#__PURE__*/_jsxs(Dropdown,{isOpen:dropdownOpen,toggle:toggle,direction:\"down\",className:\"border\",children:[/*#__PURE__*/_jsxs(DropdownToggle,{color:\"white\",caret:true,size:\"sm\",children:[\"Timeframe (\",timeframe.key,\")\"]}),/*#__PURE__*/_jsx(DropdownMenu,{children:TIMEFRAMES.map(timeframe=>{return/*#__PURE__*/_jsx(DropdownItem,{onClick:()=>setTimeframe(timeframe),children:timeframe.key},timeframe.key);})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-content\",children:/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",id:\"original\",className:\"tab-pane active\",children:/*#__PURE__*/_jsx(Chart,{klines:klines.data,socketKlines:state.klines.data,symbol:selectedMarket,timeframe:timeframe})})})]})});};export default ChartContainer;","map":{"version":3,"names":["useState","useEffect","useContext","useSelector","useDispatch","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","CardWrapper","Loader","Chart","fetchOHLCV","SocketContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TIMEFRAMES","key","value","ChartContainer","_ref","selectedMarket","state","setState","klines","loading","crypto","dropdownOpen","setDropdownOpen","toggle","prevState","timeframe","setTimeframe","_objectSpread","symbol","data","dispatch","className","children","isOpen","direction","color","caret","size","map","onClick","role","id","socketKlines"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Crypto/Exchange/ChartContainer.js"],"sourcesContent":["/* eslint-disable object-property-newline */\nimport {\n  useState, useEffect, useContext\n} from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  Dropdown, DropdownToggle, DropdownMenu, DropdownItem\n} from \"reactstrap\";\n\nimport CardWrapper from \"components/Common/CardWrapper\";\nimport Loader from \"components/Common/Loader\";\nimport Chart from \"./Chart\";\n\nimport { fetchOHLCV } from \"store/actions\";\nimport SocketContext from \"../../../context/context\";\n\nconst TIMEFRAMES = [\n  { key: \"1m\", value: 60 },\n  { key: \"5m\", value: 300 },\n  { key: \"15m\", value: 900 },\n  { key: \"30m\", value: 1800 },\n  { key: \"1h\", value: 3600 },\n  { key: \"4h\", value: 14400 },\n  { key: \"6h\", value: 21600 },\n  { key: \"12h\", value: 43200 },\n  { key: \"1d\", value: 86400 },\n  { key: \"1w\", value: 604800 },\n  { key: \"1M\", value: 241920 }\n];\n\nconst ChartContainer = ({ selectedMarket }) => {\n  const { state, setState } = useContext(SocketContext);\n  const { klines, loading } = useSelector(state => state.crypto.klines);\n\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n  const toggle = () => setDropdownOpen(prevState => !prevState);\n\n  const [timeframe, setTimeframe] = useState(TIMEFRAMES[2]); // 15m\n\n  // init socket state symbol with selected symbol\n  useEffect(() => {\n    setState({\n      ...state,\n      klines: {\n        symbol: selectedMarket,\n        data: []\n      }\n    });\n  }, [selectedMarket]);\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(fetchOHLCV({\n      symbol: selectedMarket,\n      timeframe: timeframe.key\n    }));\n  }, [selectedMarket, timeframe]);\n\n  return (\n    <CardWrapper className=\"p-2\">\n      {/* <ul className=\"nav nav-tabs\" role=\"tablist\">\n        <li className=\"nav-item\">\n          <a className=\"nav-link active\" href=\"#original\" aria-controls=\"original\" data-toggle=\"tab\">{t(\"Original\")}</a>\n        </li>\n        <li className=\"nav-item\">\n          <a className=\"nav-link\" href=\"#depth\" aria-controls=\"depth\" data-toggle=\"tab\">{t(\"Depth\")}</a>\n        </li>\n        <li className=\"nav-item\">\n          <a className=\"nav-link\" href=\"#advanced\" aria-controls=\"advanced\" data-toggle=\"tab\">{t(\"Advanced\")}</a>\n        </li>\n      </ul> */}\n      {loading ? <Loader /> : <>\n        <div className=\"p-1 d-inline-block\">\n          <Dropdown isOpen={dropdownOpen} toggle={toggle} direction=\"down\" className=\"border\">\n            <DropdownToggle color=\"white\" caret size=\"sm\">\n              Timeframe ({timeframe.key})\n            </DropdownToggle>\n            <DropdownMenu>\n              {TIMEFRAMES.map((timeframe) => {\n                return <DropdownItem key={timeframe.key}\n                  onClick={() => setTimeframe(timeframe)}\n                >\n                  {timeframe.key}\n                </DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div className=\"tab-content\">\n          <div role=\"tabpanel\" id=\"original\" className=\"tab-pane active\">\n            <Chart klines={klines.data} socketKlines={state.klines.data} symbol={selectedMarket} timeframe={timeframe} />\n          </div>\n          {/* <div role=\"tabpanel\" id=\"depth\" className=\"tab-pane\">\n            <div>{t(\"depth\")}</div>\n          </div>\n          <div role=\"tabpanel\" id=\"advanced\" className=\"tab-pane\">\n            <AdvancedChart klines={klines.data} socketKlines={state.klines.data} symbol={selectedMarket} timeframe={timeframe} />\n          </div> */}\n        </div>\n      </>}\n    </CardWrapper>\n  );\n};\n\nexport default ChartContainer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}