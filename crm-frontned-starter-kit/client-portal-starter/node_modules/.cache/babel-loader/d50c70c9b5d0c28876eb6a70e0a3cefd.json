{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import CardWrapper from\"../../../components/Common/CardWrapper\";import{Button,Col,Container,Row}from\"reactstrap\";import MetaTags from\"react-meta-tags\";// i18n\nimport{withTranslation}from\"react-i18next\";import{useDispatch,useSelector}from\"react-redux\";import{fetchBankAccounts,toggleCurrentModal}from\"../../../store/actions\";import ShowDetails from\"components/BankAccounts/ShowDetails\";import EditBankAccountModal from\"components/BankAccounts/EditBankAccountModal\";import{deleteBankAccount}from\"apis/bankAccounts\";import{showErrorNotification,showSuccessNotification}from\"store/general/notifications/actions\";import DeleteModal from\"components/Common/DeleteModal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BankAccounts(props){const dispatch=useDispatch();const bankAccounts=useSelector(state=>{var _state$crypto$bankAcc,_state$crypto$bankAcc2;return(_state$crypto$bankAcc=state.crypto.bankAccounts)===null||_state$crypto$bankAcc===void 0?void 0:(_state$crypto$bankAcc2=_state$crypto$bankAcc.bankAccounts)===null||_state$crypto$bankAcc2===void 0?void 0:_state$crypto$bankAcc2.docs;});const[showBankModal,setShowBankModal]=useState(false);const[updateBankModal,setUpdateBankModal]=useState(false);const[selectedBank,setSelectedBank]=useState({});const[deleteModal,setDeleteModal]=useState(false);const[selectedBankId,setSelectedBankId]=useState(\"\");useEffect(()=>{dispatch(fetchBankAccounts({limit:100,page:1}));},[]);const handelShow=accountDetile=>{setSelectedBank(accountDetile);setShowBankModal(true);};const handelUpdate=accountDetile=>{setSelectedBank(accountDetile);setUpdateBankModal(true);};const handelDelete=()=>{deleteBankAccount(selectedBankId).then(()=>{dispatch(showSuccessNotification(\"Bank Account Deleted successfully !!!\"));dispatch(fetchBankAccounts({limit:100,page:1}));setDeleteModal(false);}).catch(e=>{dispatch(showErrorNotification(e.toString()));setDeleteModal(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(MetaTags,{children:/*#__PURE__*/_jsx(\"title\",{children:props.t(\"Bank Accounts\")})}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-page h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between m-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"\",children:props.t(\"Bank Accounts\")}),/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn btn-secondary m-2 btn-sm w-md\",onClick:()=>{dispatch(toggleCurrentModal(\"AddBankAccountModal\"));},children:\"Add Bank Account\"})]}),(bankAccounts===null||bankAccounts===void 0?void 0:bankAccounts.length)===0&&/*#__PURE__*/_jsx(CardWrapper,{className:\"mb-3 total-balance p-4 shadow glass-card\",children:/*#__PURE__*/_jsx(Row,{className:\"align-items-center justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"No bank accounts\"})})})}),bankAccounts===null||bankAccounts===void 0?void 0:bankAccounts.map((bankAccount,index)=>/*#__PURE__*/_jsx(CardWrapper,{className:\"mb-3 total-balance p-4\",children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center justify-content-between\",children:[/*#__PURE__*/_jsx(Col,{lg:2,children:/*#__PURE__*/_jsxs(\"div\",{className:\"wallets__total\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"wallets__title h6\",children:bankAccount.bankName}),/*#__PURE__*/_jsx(\"div\",{className:\"total-balance-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"  h4\",children:bankAccount.accountHolderName})}),/*#__PURE__*/_jsxs(\"div\",{className:\"balance-price\",children:[\" \",bankAccount.accountNumber]})]})}),/*#__PURE__*/_jsxs(Col,{lg:7,className:\"wallet-btns\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"blue-gradient-color w-lg\",onClick:()=>{handelShow(bankAccount);},children:\"Show\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-success w-lg\",onClick:()=>{handelUpdate(bankAccount);},children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-danger w-lg \",onClick:()=>{setDeleteModal(true);setSelectedBankId(bankAccount._id);},children:\"Delete\"})]})]})},index))]})}),/*#__PURE__*/_jsx(ShowDetails,{isOpen:showBankModal,toggleOpen:()=>{setShowBankModal(false);},BankAccountData:selectedBank}),/*#__PURE__*/_jsx(EditBankAccountModal,{isOpen:updateBankModal,toggleOpen:()=>{setUpdateBankModal(false);},BankAccountData:selectedBank}),/*#__PURE__*/_jsx(DeleteModal,{show:deleteModal,onDeleteClick:handelDelete,onCloseClick:()=>setDeleteModal(false)})]});}export default withTranslation()(BankAccounts);","map":{"version":3,"names":["React","useEffect","useState","CardWrapper","Button","Col","Container","Row","MetaTags","withTranslation","useDispatch","useSelector","fetchBankAccounts","toggleCurrentModal","ShowDetails","EditBankAccountModal","deleteBankAccount","showErrorNotification","showSuccessNotification","DeleteModal","jsx","_jsx","jsxs","_jsxs","BankAccounts","props","dispatch","bankAccounts","state","_state$crypto$bankAcc","_state$crypto$bankAcc2","crypto","docs","showBankModal","setShowBankModal","updateBankModal","setUpdateBankModal","selectedBank","setSelectedBank","deleteModal","setDeleteModal","selectedBankId","setSelectedBankId","limit","page","handelShow","accountDetile","handelUpdate","handelDelete","then","catch","e","toString","className","children","t","type","onClick","length","map","bankAccount","index","lg","bankName","accountHolderName","accountNumber","_id","isOpen","toggleOpen","BankAccountData","show","onDeleteClick","onCloseClick"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Crypto/BankAccounts/BankAccounts.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"; \nimport CardWrapper from \"../../../components/Common/CardWrapper\";\nimport {\n  Button, Col, Container, Row\n} from \"reactstrap\";\nimport MetaTags from \"react-meta-tags\";\n// i18n\nimport { withTranslation } from \"react-i18next\"; \nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchBankAccounts, toggleCurrentModal } from \"../../../store/actions\";\nimport ShowDetails from \"components/BankAccounts/ShowDetails\";\nimport EditBankAccountModal from \"components/BankAccounts/EditBankAccountModal\";\nimport { deleteBankAccount } from \"apis/bankAccounts\";\nimport { showErrorNotification, showSuccessNotification } from \"store/general/notifications/actions\";\nimport DeleteModal from \"components/Common/DeleteModal\";\n\nfunction BankAccounts(props) {\n  const dispatch = useDispatch();\n\n  const bankAccounts = useSelector(\n    (state) => state.crypto.bankAccounts?.bankAccounts?.docs\n  );\n  const [showBankModal, setShowBankModal] = useState(false);\n  const [updateBankModal, setUpdateBankModal] = useState(false);\n  const [selectedBank, setSelectedBank] = useState({});\n  const [deleteModal, setDeleteModal] = useState(false);\n  const [selectedBankId, setSelectedBankId] = useState(\"\");\n\n  useEffect(() => {\n    dispatch(\n      fetchBankAccounts({\n        limit: 100,\n        page: 1,\n      })\n    );\n  }, []);\n  const handelShow = (accountDetile) => {\n    setSelectedBank(accountDetile);\n    setShowBankModal(true);\n  };\n  const handelUpdate = (accountDetile) => {\n    setSelectedBank(accountDetile);\n    setUpdateBankModal(true);\n  };\n  const handelDelete = () => {\n    deleteBankAccount(selectedBankId)\n      .then(() => {\n        dispatch(showSuccessNotification(\"Bank Account Deleted successfully !!!\"));\n        dispatch(\n          fetchBankAccounts({\n            limit: 100,\n            page: 1,\n          })\n        );\n        setDeleteModal(false);\n      })\n      .catch((e) => {\n        dispatch(showErrorNotification(e.toString()));\n        setDeleteModal(false);\n      });\n  };\n  return (\n    <div className=\"page-content\">\n      <MetaTags>\n        <title>{props.t(\"Bank Accounts\")}</title>\n      </MetaTags>\n      <Container>\n        <div className=\"wallet-page h-100\">\n          {/* <h1 className=\"m-4\">Overview</h1> */}\n          <div className=\"d-flex justify-content-between m-4\">\n            <h1 className=\"\">{props.t(\"Bank Accounts\")}</h1>\n            <Button \n              type=\"button\" \n              className=\"btn btn-secondary m-2 btn-sm w-md\" \n              onClick={() => { dispatch(toggleCurrentModal(\"AddBankAccountModal\"))}}\n            >\n              Add Bank Account\n            </Button>\n          </div>\n          {\n            bankAccounts?.length === 0 &&\n            <CardWrapper className='mb-3 total-balance p-4 shadow glass-card'>\n              <Row className=\"align-items-center justify-content-between\">\n                <div className=\"d-flex align-items-center justify-content-center\">\n                  <h4>\n                    {\"No bank accounts\"}\n                  </h4>\n                </div>\n              </Row>\n            </CardWrapper>\n          }\n          {bankAccounts?.map((bankAccount, index) =>\n            <CardWrapper key={index} className='mb-3 total-balance p-4'>\n              <Row className=\"align-items-center justify-content-between\">\n                <Col lg={2}>\n                  <div className=\"wallets__total\">\n                    <div className=\"wallets__title h6\">{bankAccount.bankName}</div>\n                    <div className=\"total-balance-container\">\n                      <div className=\"  h4\">{bankAccount.accountHolderName}</div>\n                    </div>\n                    <div className=\"balance-price\"> {bankAccount.accountNumber}</div>\n                  </div>\n                </Col>\n                <Col lg={7} className=\"wallet-btns\">\n                  <Button type=\"button\" className='blue-gradient-color w-lg' onClick={() => { handelShow(bankAccount) }}>Show</Button>\n                  <Button type=\"button\" className='btn-success w-lg' onClick={() => { handelUpdate(bankAccount) }}>Edit</Button>\n                  <Button type=\"button\" className='btn-danger w-lg ' onClick={() => { setDeleteModal(true); setSelectedBankId(bankAccount._id) }}>Delete</Button>\n                </Col>\n              </Row>\n            </CardWrapper>\n          )}\n        </div>\n      </Container>\n      <ShowDetails\n        isOpen={showBankModal}\n        toggleOpen={() => {\n          setShowBankModal(false);\n        }}\n        BankAccountData={selectedBank}\n      ></ShowDetails>\n      <EditBankAccountModal\n        isOpen={updateBankModal}\n        toggleOpen={() => {\n          setUpdateBankModal(false);\n        }}\n        BankAccountData={selectedBank}\n      ></EditBankAccountModal>\n      <DeleteModal\n        show={deleteModal}\n        onDeleteClick={handelDelete}\n        onCloseClick={() => setDeleteModal(false)}\n      />\n    </div>\n  );\n}\n\nexport default withTranslation()(BankAccounts); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}