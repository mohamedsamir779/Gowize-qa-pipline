{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar R = _interopRequireWildcard(require(\"ramda\"));\nvar _sort = _interopRequireDefault(require(\"./sort\"));\nvar _isEmpty = _interopRequireDefault(require(\"./isEmpty\"));\nvar sortPoints = function sortPoints(a, b) {\n  return a[1] - b[1] || a[3] - b[3];\n};\nvar mergeAttributes = function mergeAttributes(key, left, right) {\n  return key === 'attributes' ? R.merge(left, right) : right;\n};\nvar generatePoints = R.o(R.sort(sortPoints), R.addIndex(R.chain)(function (run, i) {\n  return [['start', run.start, run.attributes, i], ['end', run.end, run.attributes, i]];\n}));\nvar flattenEmptyRuns = R.compose(R.map(R.reduce(R.mergeDeepWithKey(mergeAttributes), {})), R.groupWith(R.eqProps('start')));\nvar flattenRegularRuns = function flattenRegularRuns(runs) {\n  var res = [];\n  var points = generatePoints(runs);\n  var start = -1;\n  var attrs = {};\n  var stack = [];\n  for (var _iterator = points, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n    var _ref2 = _ref,\n      type = _ref2[0],\n      offset = _ref2[1],\n      attributes = _ref2[2];\n    if (start !== -1 && start < offset) {\n      res.push({\n        start: start,\n        end: offset,\n        attributes: attrs\n      });\n    }\n    if (type === 'start') {\n      stack.push(attributes);\n      attrs = R.merge(attrs, attributes);\n    } else {\n      attrs = {};\n      for (var i = 0; i < stack.length; i++) {\n        if (stack[i] === attributes) {\n          stack.splice(i--, 1);\n        } else {\n          attrs = R.merge(attrs, stack[i]);\n        }\n      }\n    }\n    start = offset;\n  }\n  return res;\n};\n/**\n * Flatten many runs\n *\n * @param  {Array}  runs\n * @return {Array} flatten runs\n */\n\nvar flatten = function flatten(runs) {\n  if (runs === void 0) {\n    runs = [];\n  }\n  return R.compose(_sort[\"default\"], R.apply(R.useWith(R.concat, [flattenEmptyRuns, flattenRegularRuns])), R.partition(_isEmpty[\"default\"]))(runs);\n};\nvar _default = flatten;\nexports[\"default\"] = _default;","map":{"version":3,"names":["_interopRequireDefault","require","_interopRequireWildcard","exports","__esModule","R","_sort","_isEmpty","sortPoints","a","b","mergeAttributes","key","left","right","merge","generatePoints","o","sort","addIndex","chain","run","i","start","attributes","end","flattenEmptyRuns","compose","map","reduce","mergeDeepWithKey","groupWith","eqProps","flattenRegularRuns","runs","res","points","attrs","stack","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref","length","next","done","value","_ref2","type","offset","push","splice","flatten","apply","useWith","concat","partition","_default"],"sources":["/home/ubuntu/king/portal/client-portal-starter/node_modules/@react-pdf/textkit/run/flatten.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _sort = _interopRequireDefault(require(\"./sort\"));\n\nvar _isEmpty = _interopRequireDefault(require(\"./isEmpty\"));\n\nvar sortPoints = function sortPoints(a, b) {\n  return a[1] - b[1] || a[3] - b[3];\n};\n\nvar mergeAttributes = function mergeAttributes(key, left, right) {\n  return key === 'attributes' ? R.merge(left, right) : right;\n};\n\nvar generatePoints = R.o(R.sort(sortPoints), R.addIndex(R.chain)(function (run, i) {\n  return [['start', run.start, run.attributes, i], ['end', run.end, run.attributes, i]];\n}));\nvar flattenEmptyRuns = R.compose(R.map(R.reduce(R.mergeDeepWithKey(mergeAttributes), {})), R.groupWith(R.eqProps('start')));\n\nvar flattenRegularRuns = function flattenRegularRuns(runs) {\n  var res = [];\n  var points = generatePoints(runs);\n  var start = -1;\n  var attrs = {};\n  var stack = [];\n\n  for (var _iterator = points, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var _ref2 = _ref,\n        type = _ref2[0],\n        offset = _ref2[1],\n        attributes = _ref2[2];\n\n    if (start !== -1 && start < offset) {\n      res.push({\n        start: start,\n        end: offset,\n        attributes: attrs\n      });\n    }\n\n    if (type === 'start') {\n      stack.push(attributes);\n      attrs = R.merge(attrs, attributes);\n    } else {\n      attrs = {};\n\n      for (var i = 0; i < stack.length; i++) {\n        if (stack[i] === attributes) {\n          stack.splice(i--, 1);\n        } else {\n          attrs = R.merge(attrs, stack[i]);\n        }\n      }\n    }\n\n    start = offset;\n  }\n\n  return res;\n};\n/**\n * Flatten many runs\n *\n * @param  {Array}  runs\n * @return {Array} flatten runs\n */\n\n\nvar flatten = function flatten(runs) {\n  if (runs === void 0) {\n    runs = [];\n  }\n\n  return R.compose(_sort[\"default\"], R.apply(R.useWith(R.concat, [flattenEmptyRuns, flattenRegularRuns])), R.partition(_isEmpty[\"default\"]))(runs);\n};\n\nvar _default = flatten;\nexports[\"default\"] = _default;"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AAEpF,IAAIC,uBAAuB,GAAGD,OAAO,CAAC,+CAA+C,CAAC;AAEtFE,OAAO,CAACC,UAAU,GAAG,IAAI;AACzBD,OAAO,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;AAE3B,IAAIE,CAAC,GAAGH,uBAAuB,CAACD,OAAO,CAAC,OAAO,CAAC,CAAC;AAEjD,IAAIK,KAAK,GAAGN,sBAAsB,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC;AAErD,IAAIM,QAAQ,GAAGP,sBAAsB,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC;AAE3D,IAAIO,UAAU,GAAG,SAASA,UAAUA,CAACC,CAAC,EAAEC,CAAC,EAAE;EACzC,OAAOD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,IAAID,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC;AACnC,CAAC;AAED,IAAIC,eAAe,GAAG,SAASA,eAAeA,CAACC,GAAG,EAAEC,IAAI,EAAEC,KAAK,EAAE;EAC/D,OAAOF,GAAG,KAAK,YAAY,GAAGP,CAAC,CAACU,KAAK,CAACF,IAAI,EAAEC,KAAK,CAAC,GAAGA,KAAK;AAC5D,CAAC;AAED,IAAIE,cAAc,GAAGX,CAAC,CAACY,CAAC,CAACZ,CAAC,CAACa,IAAI,CAACV,UAAU,CAAC,EAAEH,CAAC,CAACc,QAAQ,CAACd,CAAC,CAACe,KAAK,CAAC,CAAC,UAAUC,GAAG,EAAEC,CAAC,EAAE;EACjF,OAAO,CAAC,CAAC,OAAO,EAAED,GAAG,CAACE,KAAK,EAAEF,GAAG,CAACG,UAAU,EAAEF,CAAC,CAAC,EAAE,CAAC,KAAK,EAAED,GAAG,CAACI,GAAG,EAAEJ,GAAG,CAACG,UAAU,EAAEF,CAAC,CAAC,CAAC;AACvF,CAAC,CAAC,CAAC;AACH,IAAII,gBAAgB,GAAGrB,CAAC,CAACsB,OAAO,CAACtB,CAAC,CAACuB,GAAG,CAACvB,CAAC,CAACwB,MAAM,CAACxB,CAAC,CAACyB,gBAAgB,CAACnB,eAAe,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAEN,CAAC,CAAC0B,SAAS,CAAC1B,CAAC,CAAC2B,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;AAE3H,IAAIC,kBAAkB,GAAG,SAASA,kBAAkBA,CAACC,IAAI,EAAE;EACzD,IAAIC,GAAG,GAAG,EAAE;EACZ,IAAIC,MAAM,GAAGpB,cAAc,CAACkB,IAAI,CAAC;EACjC,IAAIX,KAAK,GAAG,CAAC,CAAC;EACd,IAAIc,KAAK,GAAG,CAAC,CAAC;EACd,IAAIC,KAAK,GAAG,EAAE;EAEd,KAAK,IAAIC,SAAS,GAAGH,MAAM,EAAEI,QAAQ,GAAGC,KAAK,CAACC,OAAO,CAACH,SAAS,CAAC,EAAEI,EAAE,GAAG,CAAC,EAAEJ,SAAS,GAAGC,QAAQ,GAAGD,SAAS,GAAGA,SAAS,CAACK,MAAM,CAACC,QAAQ,CAAC,CAAC,CAAC,IAAI;IAC3I,IAAIC,IAAI;IAER,IAAIN,QAAQ,EAAE;MACZ,IAAIG,EAAE,IAAIJ,SAAS,CAACQ,MAAM,EAAE;MAC5BD,IAAI,GAAGP,SAAS,CAACI,EAAE,EAAE,CAAC;IACxB,CAAC,MAAM;MACLA,EAAE,GAAGJ,SAAS,CAACS,IAAI,CAAC,CAAC;MACrB,IAAIL,EAAE,CAACM,IAAI,EAAE;MACbH,IAAI,GAAGH,EAAE,CAACO,KAAK;IACjB;IAEA,IAAIC,KAAK,GAAGL,IAAI;MACZM,IAAI,GAAGD,KAAK,CAAC,CAAC,CAAC;MACfE,MAAM,GAAGF,KAAK,CAAC,CAAC,CAAC;MACjB3B,UAAU,GAAG2B,KAAK,CAAC,CAAC,CAAC;IAEzB,IAAI5B,KAAK,KAAK,CAAC,CAAC,IAAIA,KAAK,GAAG8B,MAAM,EAAE;MAClClB,GAAG,CAACmB,IAAI,CAAC;QACP/B,KAAK,EAAEA,KAAK;QACZE,GAAG,EAAE4B,MAAM;QACX7B,UAAU,EAAEa;MACd,CAAC,CAAC;IACJ;IAEA,IAAIe,IAAI,KAAK,OAAO,EAAE;MACpBd,KAAK,CAACgB,IAAI,CAAC9B,UAAU,CAAC;MACtBa,KAAK,GAAGhC,CAAC,CAACU,KAAK,CAACsB,KAAK,EAAEb,UAAU,CAAC;IACpC,CAAC,MAAM;MACLa,KAAK,GAAG,CAAC,CAAC;MAEV,KAAK,IAAIf,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgB,KAAK,CAACS,MAAM,EAAEzB,CAAC,EAAE,EAAE;QACrC,IAAIgB,KAAK,CAAChB,CAAC,CAAC,KAAKE,UAAU,EAAE;UAC3Bc,KAAK,CAACiB,MAAM,CAACjC,CAAC,EAAE,EAAE,CAAC,CAAC;QACtB,CAAC,MAAM;UACLe,KAAK,GAAGhC,CAAC,CAACU,KAAK,CAACsB,KAAK,EAAEC,KAAK,CAAChB,CAAC,CAAC,CAAC;QAClC;MACF;IACF;IAEAC,KAAK,GAAG8B,MAAM;EAChB;EAEA,OAAOlB,GAAG;AACZ,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAGA,IAAIqB,OAAO,GAAG,SAASA,OAAOA,CAACtB,IAAI,EAAE;EACnC,IAAIA,IAAI,KAAK,KAAK,CAAC,EAAE;IACnBA,IAAI,GAAG,EAAE;EACX;EAEA,OAAO7B,CAAC,CAACsB,OAAO,CAACrB,KAAK,CAAC,SAAS,CAAC,EAAED,CAAC,CAACoD,KAAK,CAACpD,CAAC,CAACqD,OAAO,CAACrD,CAAC,CAACsD,MAAM,EAAE,CAACjC,gBAAgB,EAAEO,kBAAkB,CAAC,CAAC,CAAC,EAAE5B,CAAC,CAACuD,SAAS,CAACrD,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC2B,IAAI,CAAC;AAClJ,CAAC;AAED,IAAI2B,QAAQ,GAAGL,OAAO;AACtBrD,OAAO,CAAC,SAAS,CAAC,GAAG0D,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"script"}