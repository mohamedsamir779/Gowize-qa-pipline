{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{connect,useDispatch}from\"react-redux\";import{Button}from\"reactstrap\";//i18n\nimport{withTranslation}from\"react-i18next\";import CustomTable from\"../../../components/Common/CustomTable\";import{getConvertsStart}from\"../../../store/crypto/history/actions\";import{getAssetImgSrc}from\"helpers/assetImgSrc\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Orders(props){var _props$converts;const dispatch=useDispatch();const[limit,setLimit]=useState(5);const columns=[{dataField:\"\",text:\"\"},{text:props.t(\"From asset\"),dataField:\"toAsset\",formatter:val=>{var _props$assets;const found=(_props$assets=props.assets)===null||_props$assets===void 0?void 0:_props$assets.find(asset=>asset.symbol===val.fromAsset);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"balances__company\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"balances__logo\",children:/*#__PURE__*/_jsx(\"img\",{src:getAssetImgSrc(found),alt:\"symbol\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"balances__text\",children:val.fromAsset?val.fromAsset:\"\"})]})});}},{text:props.t(\"To asset\"),dataField:\"toAsset\",formatter:val=>{var _props$assets2;const found=(_props$assets2=props.assets)===null||_props$assets2===void 0?void 0:_props$assets2.find(asset=>asset.symbol===val.toAsset);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"balances__company\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"balances__logo\",children:/*#__PURE__*/_jsx(\"img\",{src:getAssetImgSrc(found),alt:\"symbol\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"balances__text\",children:val.toAsset?val.toAsset:\"\"})]})});}},{text:props.t(\"Date\"),dataField:\"createdAt\",formatter:item=>{let d=new Date(item.createdAt);d=\"\".concat(d.toLocaleDateString(),\", \").concat(d.toLocaleTimeString());return d;}},{text:props.t(\"From Amount\"),dataField:\"amount\",formatter:item=>item.amount?item.amount.$numberDecimal:\"-\"},{text:props.t(\"To Amount\"),dataField:\"toAmount\",formatter:item=>item.toAmount?item.toAmount.$numberDecimal:\"-\"},{text:props.t(\"Status\"),dataField:\"status\"}];// when the filter value changes it fetches data with the new filter\nuseEffect(()=>{var _props$filterObj,_props$filterObj2,_props$filterObj3,_props$filterObj4,_props$filterObj5;dispatch(getConvertsStart({limit:limit,page:1,fromAsset:(_props$filterObj=props.filterObj)===null||_props$filterObj===void 0?void 0:_props$filterObj.fromAsset,toAsset:(_props$filterObj2=props.filterObj)===null||_props$filterObj2===void 0?void 0:_props$filterObj2.toAsset,status:(_props$filterObj3=props.filterObj)===null||_props$filterObj3===void 0?void 0:_props$filterObj3.status,fromDate:(_props$filterObj4=props.filterObj)===null||_props$filterObj4===void 0?void 0:_props$filterObj4.fromDate,toDate:(_props$filterObj5=props.filterObj)===null||_props$filterObj5===void 0?void 0:_props$filterObj5.toDate}));},[props.filterObj,limit]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CustomTable,{columns:columns,rows:props.converts,loading:props.convertLoading}),((_props$converts=props.converts)===null||_props$converts===void 0?void 0:_props$converts.length)>0&&/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"blue-gradient-color w-100\",onClick:()=>{var _props$converts2;if(props.totalDocs>((_props$converts2=props.converts)===null||_props$converts2===void 0?void 0:_props$converts2.length)){setLimit(preValue=>preValue+5);}},children:props.t(\"Load More\")})]});}const mapStateToProps=state=>({converts:state.crypto.historyReducer.converts,totalDocs:state.crypto.historyReducer.totalDocs,convertLoading:state.crypto.historyReducer.loading});export default connect(mapStateToProps,null)(withTranslation()(Orders));","map":{"version":3,"names":["React","useState","useEffect","connect","useDispatch","Button","withTranslation","CustomTable","getConvertsStart","getAssetImgSrc","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Orders","props","_props$converts","dispatch","limit","setLimit","columns","dataField","text","t","formatter","val","_props$assets","found","assets","find","asset","symbol","fromAsset","children","className","src","alt","_props$assets2","toAsset","item","d","Date","createdAt","concat","toLocaleDateString","toLocaleTimeString","amount","$numberDecimal","toAmount","_props$filterObj","_props$filterObj2","_props$filterObj3","_props$filterObj4","_props$filterObj5","page","filterObj","status","fromDate","toDate","rows","converts","loading","convertLoading","length","type","onClick","_props$converts2","totalDocs","preValue","mapStateToProps","state","crypto","historyReducer"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Crypto/History/Convert.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { Button } from \"reactstrap\";\n\n//i18n\nimport { withTranslation } from \"react-i18next\";\nimport CustomTable from \"../../../components/Common/CustomTable\";\nimport { getConvertsStart } from \"../../../store/crypto/history/actions\";\nimport { getAssetImgSrc } from \"helpers/assetImgSrc\";\n\nfunction Orders(props) {\n  const dispatch = useDispatch();\n  const [limit, setLimit] = useState(5);\n\n  const columns = [\n    {\n      dataField: \"\",\n      text: \"\"\n    },\n    {\n      text: props.t(\"From asset\"),\n      dataField: \"toAsset\",\n      formatter:(val)=>{\n        const found = props.assets?.find((asset)=>asset.symbol === val.fromAsset);\n        return <>\n          <div className=\"balances__company\">\n            <div className=\"balances__logo\">\n              <img src={getAssetImgSrc(found)} alt=\"symbol\"></img>\n            </div>\n            <div className=\"balances__text\">{val.fromAsset ? val.fromAsset : \"\"}</div>\n          </div></>;\n      }\n    },\n    {\n      text: props.t(\"To asset\"),\n      dataField: \"toAsset\",\n      formatter:(val)=>{\n        const found = props.assets?.find((asset)=>asset.symbol === val.toAsset);\n        return <>\n          <div className=\"balances__company\">\n            <div className=\"balances__logo\">\n              <img src={getAssetImgSrc(found)} alt=\"symbol\"></img>\n            </div>\n            <div className=\"balances__text\">{val.toAsset ? val.toAsset : \"\"}</div>\n          </div></>;\n      }\n    },\n    {\n      text: props.t(\"Date\"),\n      dataField: \"createdAt\",\n      formatter: (item) => {\n        let d = new Date(item.createdAt);\n        d = `${d.toLocaleDateString()}, ${d.toLocaleTimeString()}`;\n        return d;\n      }\n    },\n    {\n      text: props.t(\"From Amount\"),\n      dataField: \"amount\",\n      formatter: (item) =>(\n        item.amount ? item.amount.$numberDecimal : \"-\"\n      )\n    },\n    {\n      text: props.t(\"To Amount\"),\n      dataField: \"toAmount\",\n      formatter: (item) =>(\n        item.toAmount ? item.toAmount.$numberDecimal : \"-\"\n      )\n    },\n    {\n      text: props.t(\"Status\"),\n      dataField: \"status\",\n    }\n  ];\n\n  // when the filter value changes it fetches data with the new filter\n  useEffect(() => {\n    dispatch(getConvertsStart({\n      limit:limit,\n      page:1,\n      fromAsset: props.filterObj?.fromAsset,\n      toAsset: props.filterObj?.toAsset,\n      status: props.filterObj?.status,\n      fromDate: props.filterObj?.fromDate,\n      toDate: props.filterObj?.toDate,\n    }));\n    \n  }, [props.filterObj, limit]);\n\n  return (\n    <React.Fragment>\n      <CustomTable \n        columns={columns} \n        rows={props.converts} \n        loading={props.convertLoading}\n      />\n      {\n        props.converts?.length > 0 \n          &&\n          <Button \n            type=\"button\" \n            className='blue-gradient-color w-100' \n            onClick={() => {\n              if (props.totalDocs > props.converts?.length) {\n                setLimit(preValue => preValue + 5);\n              }\n            }}\n          >\n            {props.t(\"Load More\")}\n          </Button> \n      }\n    </React.Fragment>\n  );\n}\n\nconst mapStateToProps = (state)=>(\n  {\n    converts: state.crypto.historyReducer.converts,\n    totalDocs : state.crypto.historyReducer.totalDocs,\n    convertLoading: state.crypto.historyReducer.loading,\n  }\n);\n\nexport default connect(mapStateToProps, null)(withTranslation()(Orders)); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}