{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{Dropdown,DropdownToggle,DropdownMenu,Row,Col}from\"reactstrap\";import SimpleBar from\"simplebar-react\";//Import Icons\nimport FeatherIcon from\"feather-icons-react\";//i18n\nimport{useTranslation}from\"react-i18next\";import{useDispatch,useSelector}from\"react-redux\";import{fetchNotifications,markNotificationRead}from\"store/general/notifications/actions\";import NotificationDropdownItem from\"./NotificationDropdownItem\";import TableLoader from\"components/Common/Loader\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotificationDropdown=props=>{const{t}=useTranslation();// Declare a new state variable, which we'll call \"menu\"\nconst[menu,setMenu]=useState(false);const dispatch=useDispatch();const{notifications,totalUnreadNotifications,loading,layoutMode}=useSelector(state=>{var _state$notificationsR,_state$notificationsR2,_state$notificationsR3,_state$notificationsR4,_state$notificationsR5;return{notifications:((_state$notificationsR=state.notificationsReducer)===null||_state$notificationsR===void 0?void 0:(_state$notificationsR2=_state$notificationsR.unreadNotifications)===null||_state$notificationsR2===void 0?void 0:_state$notificationsR2.docs)||[],totalUnreadNotifications:((_state$notificationsR3=state.notificationsReducer)===null||_state$notificationsR3===void 0?void 0:(_state$notificationsR4=_state$notificationsR3.unreadNotifications)===null||_state$notificationsR4===void 0?void 0:_state$notificationsR4.totalDocs)||0,loading:((_state$notificationsR5=state.notificationsReducer)===null||_state$notificationsR5===void 0?void 0:_state$notificationsR5.loading)||false,layoutMode:state.Layout.layoutMode};});useEffect(()=>{dispatch(fetchNotifications({page:1,limit:10,read:false}));},[]);const markAsRead=()=>{dispatch(markNotificationRead({all:true}));};return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Dropdown,{isOpen:menu,toggle:()=>setMenu(!menu),className:\"dropdown d-inline-block\",tag:\"li\",children:[/*#__PURE__*/_jsxs(DropdownToggle,{className:\"btn header-item noti-icon position-relative\",tag:\"button\",id:\"page-header-notifications-dropdown\",children:[/*#__PURE__*/_jsx(FeatherIcon,{icon:\"bell\",className:\"icon-lg\",color:layoutMode===\"dark\"?\"#F89622\":\"\"}),totalUnreadNotifications!==0&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-danger rounded-pill\",children:totalUnreadNotifications})]}),/*#__PURE__*/_jsxs(DropdownMenu,{className:\"dropdown-menu-lg dropdown-menu-end p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"h6\",{className:\"m-0\",children:[\" \",t(\"Notifications\"),\" \"]})}),!loading&&totalUnreadNotifications!==0&&/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsxs(Link,{to:\"#\",className:\"small\",onClick:markAsRead,children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-read me-1\"}),\" \",t(\"Mark all as read\")]})})]})}),/*#__PURE__*/_jsxs(SimpleBar,{style:{height:\"300px\"},children:[loading&&/*#__PURE__*/_jsx(TableLoader,{}),!loading&&totalUnreadNotifications===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center w-100 mt-4\",children:t(\"You have read all your notifications!\")}),!loading&&(notifications===null||notifications===void 0?void 0:notifications.map((notification,key)=>/*#__PURE__*/_jsx(NotificationDropdownItem,{notification:notification},key)))]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-2 border-top d-grid\",children:/*#__PURE__*/_jsxs(Link,{className:\"btn btn-sm btn-link font-size-14 btn-block text-center\",to:\"/notifications\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"mdi mdi-arrow-right-circle me-1\"}),\" \",t(\"View all\"),\" \"]})})]})]})});};export default NotificationDropdown;","map":{"version":3,"names":["React","useState","useEffect","Link","Dropdown","DropdownToggle","DropdownMenu","Row","Col","SimpleBar","FeatherIcon","useTranslation","useDispatch","useSelector","fetchNotifications","markNotificationRead","NotificationDropdownItem","TableLoader","jsx","_jsx","jsxs","_jsxs","NotificationDropdown","props","t","menu","setMenu","dispatch","notifications","totalUnreadNotifications","loading","layoutMode","state","_state$notificationsR","_state$notificationsR2","_state$notificationsR3","_state$notificationsR4","_state$notificationsR5","notificationsReducer","unreadNotifications","docs","totalDocs","Layout","page","limit","read","markAsRead","all","Fragment","children","isOpen","toggle","className","tag","id","icon","color","to","onClick","style","height","map","notification","key"],"sources":["/home/ubuntu/Gowize-qa-pipline/client-portal-starter/src/components/CommonForBoth/TopbarDropdown/NotificationDropdown.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Dropdown, DropdownToggle, DropdownMenu, Row, Col\n} from \"reactstrap\";\nimport SimpleBar from \"simplebar-react\";\n\n//Import Icons\nimport FeatherIcon from \"feather-icons-react\";\n\n//i18n\nimport { useTranslation } from \"react-i18next\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchNotifications, markNotificationRead } from \"store/general/notifications/actions\";\nimport NotificationDropdownItem from \"./NotificationDropdownItem\";\nimport TableLoader from \"components/Common/Loader\";\n\nconst NotificationDropdown = props => {\n  const { t } = useTranslation();\n  // Declare a new state variable, which we'll call \"menu\"\n  const [menu, setMenu] = useState(false);\n  const dispatch = useDispatch();\n  const {\n    notifications,\n    totalUnreadNotifications,\n    loading,\n    layoutMode,\n  } = useSelector(state => ({\n    notifications: state.notificationsReducer?.unreadNotifications?.docs || [],\n    totalUnreadNotifications: state.notificationsReducer?.unreadNotifications?.totalDocs || 0,\n    loading: state.notificationsReducer?.loading || false,\n    layoutMode: state.Layout.layoutMode,\n  }));\n\n  useEffect(() => {\n    dispatch(fetchNotifications({\n      page: 1,\n      limit: 10,\n      read: false,\n    }));\n  }, []);\n\n  const markAsRead = () => {\n    dispatch(markNotificationRead({\n      all: true\n    }));\n  };\n\n  return (\n    <React.Fragment>\n      <Dropdown\n        isOpen={menu}\n        toggle={() => setMenu(!menu)}\n        className=\"dropdown d-inline-block\"\n        tag=\"li\"\n      >\n        <DropdownToggle\n          className=\"btn header-item noti-icon position-relative\"\n          tag=\"button\"\n          id=\"page-header-notifications-dropdown\"\n        >\n          <FeatherIcon\n            icon=\"bell\"\n            className=\"icon-lg\"\n            color={layoutMode === \"dark\" ? \"#F89622\" : \"\"}\n          />\n          {totalUnreadNotifications !== 0 && (\n            <span className=\"badge bg-danger rounded-pill\">{totalUnreadNotifications}</span>\n          )}\n        </DropdownToggle>\n\n        <DropdownMenu className=\"dropdown-menu-lg dropdown-menu-end p-0\">\n          <div className=\"p-3\">\n            <Row className=\"align-items-center\">\n              <Col>\n                <h6 className=\"m-0\"> {t(\"Notifications\")} </h6>\n              </Col>\n              {\n                !loading && totalUnreadNotifications !== 0 && (\n                  <div className=\"col-auto\">\n                    <Link\n                      to=\"#\"\n                      className=\"small\"\n                      onClick={markAsRead}\n                    >\n                      {\" \"}\n                      <i className=\"mdi mdi-read me-1\"></i>\n                      {\" \"}\n                      {t(\"Mark all as read\")}\n                    </Link>\n                  </div>\n                )\n              }\n            </Row>\n          </div>\n\n          <SimpleBar style={{ height: \"300px\" }}>\n            {\n              loading && <TableLoader />\n            }\n            {\n              !loading && totalUnreadNotifications === 0 && (\n                <div className=\"text-center w-100 mt-4\">\n                  {t(\"You have read all your notifications!\")}\n                </div>\n              )\n            }\n            {\n              !loading && notifications?.map((notification, key) => (\n                <NotificationDropdownItem key={key} notification={notification} />\n              ))\n            }\n          </SimpleBar>\n          <div className=\"p-2 border-top d-grid\">\n            <Link\n              className=\"btn btn-sm btn-link font-size-14 btn-block text-center\"\n              to=\"/notifications\"\n            >\n              <i className=\"mdi mdi-arrow-right-circle me-1\"></i>\n              {\" \"}\n              {t(\"View all\")}{\" \"}\n            </Link>\n          </div>\n        </DropdownMenu>\n      </Dropdown>\n    </React.Fragment>\n  );\n};\n\nexport default NotificationDropdown;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}