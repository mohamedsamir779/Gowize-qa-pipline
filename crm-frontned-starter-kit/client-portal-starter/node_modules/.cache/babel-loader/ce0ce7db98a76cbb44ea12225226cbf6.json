{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{MetaTags}from\"react-meta-tags\";import{withTranslation}from\"react-i18next\";import{Container}from\"react-bootstrap\";import{Table,Thead,Tbody,Tr,Th}from\"react-super-responsive-table\";import{fetchAgreements,fetchReferrals}from\"store/actions\";import CardWrapper from\"components/Common/CardWrapper\";import RecursiveTableRows from\"./RecursiveTableRows\";import Select from\"react-select\";import PageHeader2 from\"components/Forex/Common/pageHeader2\";import IbNotApproved from\"components/Common/IbNotApproved\";import Loader from\"components/Common/Loader\";import{Button}from\"reactstrap\";import CustomSelect from\"components/Common/CustomSelect\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Referral=_ref=>{let{t}=_ref;const dispatch=useDispatch();const{agreements,loading}=useSelector(state=>state.forex.ib.agreements);const referrals=useSelector(state=>state.forex.ib.agreements.referrals);const{subPortal}=useSelector(state=>state.Layout);const partnershipAgreement=useSelector(state=>{var _state$Profile$client,_state$Profile$client2;return(_state$Profile$client=state.Profile.clientData.stages)===null||_state$Profile$client===void 0?void 0:(_state$Profile$client2=_state$Profile$client.ib)===null||_state$Profile$client2===void 0?void 0:_state$Profile$client2.partnershipAgreement;});const[isIbPortal]=useState(subPortal===\"IB\");const[selectedAgreement,setSelectedAgreement]=useState(undefined);useEffect(()=>{dispatch(fetchReferrals({type:\"live\"}));dispatch(fetchAgreements());},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(MetaTags,{children:/*#__PURE__*/_jsx(\"title\",{children:t(\"Referrals\")})}),/*#__PURE__*/_jsxs(Container,{className:\"mt-5\",children:[isIbPortal&&!partnershipAgreement&&/*#__PURE__*/_jsx(IbNotApproved,{}),/*#__PURE__*/_jsx(PageHeader2,{title:\"Referrals\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-4\",children:[/*#__PURE__*/_jsx(\"label\",{children:t(\"Select Agreement\")}),/*#__PURE__*/_jsx(CustomSelect,{className:\"w-full\",name:\"agreement\",onChange:e=>{setSelectedAgreement(e.value);},value:selectedAgreement?selectedAgreement===null||selectedAgreement===void 0?void 0:selectedAgreement.value:\"\",options:agreements===null||agreements===void 0?void 0:agreements.map(agreement=>{return{label:agreement.title,value:agreement._id};})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row col-md-auto align-content-end\",children:/*#__PURE__*/_jsx(Button,{className:\"color-bg-btn border-0\",onClick:()=>{setSelectedAgreement(undefined);},children:t(\"Clear\")})})]})}),/*#__PURE__*/_jsx(CardWrapper,{className:\"p-3 mt-4 glass-card shadow\",children:loading?/*#__PURE__*/_jsx(Loader,{}):referrals.length>0&&/*#__PURE__*/_jsxs(Table,{className:\"table table-hover text-center\",children:[/*#__PURE__*/_jsx(Thead,{children:/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Th,{className:\"py-2\",children:t(\"Name\")}),/*#__PURE__*/_jsx(Th,{className:\"py-2\",children:t(\"Client Type\")}),/*#__PURE__*/_jsx(Th,{className:\"py-2\",children:t(\"Accounts\")}),/*#__PURE__*/_jsx(Th,{className:\"py-2\",children:t(\"Parent Name\")})]})}),/*#__PURE__*/_jsx(Tbody,{children:/*#__PURE__*/_jsx(RecursiveTableRows,{data:referrals[0],filter:selectedAgreement})})]})})]})]});};export default withTranslation()(Referral);","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","MetaTags","withTranslation","Container","Table","Thead","Tbody","Tr","Th","fetchAgreements","fetchReferrals","CardWrapper","RecursiveTableRows","Select","PageHeader2","IbNotApproved","Loader","Button","CustomSelect","jsx","_jsx","jsxs","_jsxs","Referral","_ref","t","dispatch","agreements","loading","state","forex","ib","referrals","subPortal","Layout","partnershipAgreement","_state$Profile$client","_state$Profile$client2","Profile","clientData","stages","isIbPortal","selectedAgreement","setSelectedAgreement","undefined","type","className","children","title","name","onChange","e","value","options","map","agreement","label","_id","onClick","length","data","filter"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Forex/Partnership/Referrals/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { MetaTags } from \"react-meta-tags\";\nimport { withTranslation } from \"react-i18next\";\nimport { Container } from \"react-bootstrap\";\nimport {\n  Table, Thead, Tbody, Tr, Th\n} from \"react-super-responsive-table\";\n\nimport { fetchAgreements, fetchReferrals } from \"store/actions\";\n\nimport CardWrapper from \"components/Common/CardWrapper\";\nimport RecursiveTableRows from \"./RecursiveTableRows\";\nimport Select from \"react-select\";\nimport PageHeader2 from \"components/Forex/Common/pageHeader2\";\nimport IbNotApproved from \"components/Common/IbNotApproved\";\nimport Loader from \"components/Common/Loader\";\nimport { Button } from \"reactstrap\";\nimport CustomSelect from \"components/Common/CustomSelect\";\n\nconst Referral = ({ t }) => {\n  const dispatch = useDispatch();\n\n  const { agreements, loading } = useSelector((state) => state.forex.ib.agreements);\n  const referrals = useSelector((state) => state.forex.ib.agreements.referrals);\n  const { subPortal } = useSelector(state=>state.Layout);\n  const partnershipAgreement = useSelector((state) => (state.Profile.clientData.stages?.ib?.partnershipAgreement));\n  \n  const [isIbPortal, ] = useState(subPortal === \"IB\");\n  const [selectedAgreement, setSelectedAgreement] = useState(undefined);\n\n  useEffect(() => {\n    dispatch(fetchReferrals({\n      type: \"live\",\n    }));\n    dispatch(fetchAgreements());\n  }, []);\n\n  return (\n    <div className=\"page-content\">\n      <MetaTags>\n        <title>{t(\"Referrals\")}</title>\n      </MetaTags>\n      <Container className=\"mt-5\">\n        { isIbPortal && !partnershipAgreement && <IbNotApproved /> }\n        <PageHeader2 title=\"Referrals\" />\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-4\">\n              <label>{t(\"Select Agreement\")}</label>\n              <CustomSelect\n                className=\"w-full\"\n                name=\"agreement\"\n                onChange={(e) => { setSelectedAgreement(e.value) }}\n                value={selectedAgreement ? selectedAgreement?.value : \"\"}\n                options={agreements?.map((agreement) => {\n                  return ({\n                    label: agreement.title,\n                    value: agreement._id,\n                  });\n                })}\n              />\n            </div>\n            <div className=\"row col-md-auto align-content-end\" >\n              <Button className=\"color-bg-btn border-0\" onClick={()=>{setSelectedAgreement(undefined)}}>\n                {t(\"Clear\")}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <CardWrapper className=\"p-3 mt-4 glass-card shadow\">\n          {loading ? <Loader /> : referrals.length > 0 &&\n            <Table className=\"table table-hover text-center\">\n              <Thead>\n                <Tr >\n                  <Th className=\"py-2\">{t(\"Name\")}</Th>\n                  <Th className=\"py-2\">{t(\"Client Type\")}</Th>\n                  <Th className=\"py-2\">{t(\"Accounts\")}</Th>\n                  <Th className=\"py-2\">{t(\"Parent Name\")}</Th>\n                </Tr>\n              </Thead>\n              <Tbody>\n                <RecursiveTableRows data={referrals[0]} filter={selectedAgreement} />\n              </Tbody>\n            </Table>}\n        </CardWrapper>\n      </Container >\n    </div>\n  );\n};\n\nexport default withTranslation()(Referral);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}