{"ast":null,"code":"import{Container,Table,Button}from\"reactstrap\";import MetaTags from\"react-meta-tags\";import{withTranslation}from\"react-i18next\";import{useDispatch,connect}from\"react-redux\";import{useState,useEffect}from\"react\";import{fetchLogs}from\"../../../store/general/logs/actions\";import{getLogMessage}from\"helpers/getLogMessages\";import Loader from\"components/Common/Loader\";import CardWrapper from\"components/Common/CardWrapper\";import PageHeader from\"components/Forex/Common/PageHeader\";import{Tbody,Td,Th,Thead,Tr}from\"react-super-responsive-table\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Activites=props=>{const dispatch=useDispatch();const{t,logs,loading,totalDocs}=props;const constLimit=5;const[limit,setLimit]=useState(constLimit);useEffect(()=>{dispatch(fetchLogs({page:1,limit}));},[limit]);function dateFormatter(val){let d=new Date(val.createdAt);d=\"\".concat(d.toLocaleDateString(),\", \").concat(d.toLocaleTimeString());return d;}function renderLoadBtn(){return(logs===null||logs===void 0?void 0:logs.length)>0&&totalDocs>(logs===null||logs===void 0?void 0:logs.length)&&!loading&&/*#__PURE__*/_jsx(Button,{type:\"button\",className:\" w-100 mt-2 color-bg-btn border-0\",onClick:()=>{if(totalDocs>(logs===null||logs===void 0?void 0:logs.length)){setLimit(preValue=>preValue+constLimit);}},children:t(\"Load More\")});}const columns=[{dataField:\"createdAt\",text:t(\"Date and Time\"),sort:true,formatter:dateFormatter},{dataField:\"message\",text:t(\"Message\"),sort:true,formatter:val=>getLogMessage(val)}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaTags,{children:/*#__PURE__*/_jsx(\"title\",{children:t(\"Activities\")})}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-content mt-5\",children:[/*#__PURE__*/_jsx(PageHeader,{title:\"Activities \"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(CardWrapper,{className:\"mt-4 p-4 glass-card shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-3 mt-4\",children:/*#__PURE__*/_jsxs(Table,{borderless:true,responsive:true,className:\"text-center mb-0\",children:[/*#__PURE__*/_jsx(Thead,{className:\"text-center table-light\",children:/*#__PURE__*/_jsx(Tr,{children:columns.map((column,index)=>/*#__PURE__*/_jsx(Th,{\"data-priority\":index,className:\"color-primary\",children:column.text},index))})}),/*#__PURE__*/_jsxs(Tbody,{children:[loading&&/*#__PURE__*/_jsx(Loader,{}),(logs===null||logs===void 0?void 0:logs.length)>0&&logs.map((log,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-top\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"font-weight-bold\",children:dateFormatter(log)}),/*#__PURE__*/_jsx(\"td\",{className:\"font-weight-bold\",children:getLogMessage(log)})]},index))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:renderLoadBtn()})]})})]})})]});};const mapStateToProps=state=>({logs:state.logs.logs&&state.logs.logs.docs||[],totalDocs:state.logs.logs.totalDocs,logsLoaded:state.logs.logsLoaded,loading:state.logs.loading});export default connect(mapStateToProps,null)(withTranslation()(Activites));","map":{"version":3,"names":["Container","Table","Button","MetaTags","withTranslation","useDispatch","connect","useState","useEffect","fetchLogs","getLogMessage","Loader","CardWrapper","PageHeader","Tbody","Td","Th","Thead","Tr","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Activites","props","dispatch","t","logs","loading","totalDocs","constLimit","limit","setLimit","page","dateFormatter","val","d","Date","createdAt","concat","toLocaleDateString","toLocaleTimeString","renderLoadBtn","length","type","className","onClick","preValue","children","columns","dataField","text","sort","formatter","title","borderless","responsive","map","column","index","log","mapStateToProps","state","docs","logsLoaded"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Forex/Activites/index.js"],"sourcesContent":["import {\n  Container, Table,\n  Button\n} from \"reactstrap\";\nimport MetaTags from \"react-meta-tags\";\nimport { withTranslation } from \"react-i18next\";\nimport { useDispatch, connect } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport { fetchLogs } from \"../../../store/general/logs/actions\";\nimport { getLogMessage } from \"helpers/getLogMessages\";\nimport Loader from \"components/Common/Loader\";\nimport CardWrapper from \"components/Common/CardWrapper\";\nimport PageHeader from \"components/Forex/Common/PageHeader\";\nimport {\n  Tbody,\n  Td,\n  Th,\n  Thead,\n  Tr\n} from \"react-super-responsive-table\";\n\nconst Activites = (props) => {\n  const dispatch = useDispatch();\n  const {\n    t,\n    logs,\n    loading,\n    totalDocs,\n  } = props;  const constLimit = 5;\n  const [limit, setLimit] = useState(constLimit);\n  useEffect(() => {\n    dispatch(fetchLogs({\n      page: 1,\n      limit,\n    }));\n  }, [limit]);\n\n  function dateFormatter(val)  {\n    let d = new Date(val.createdAt);\n    d = `${d.toLocaleDateString()}, ${d.toLocaleTimeString()}`;\n    return d;\n  }\n\n  function renderLoadBtn() {\n    return logs?.length > 0\n      && totalDocs > logs?.length && !loading &&\n      <Button\n        type=\"button\"\n        className=' w-100 mt-2 color-bg-btn border-0'\n        onClick={() => {\n          if (totalDocs > logs?.length) {\n            setLimit(preValue => preValue + constLimit);\n          }\n        }}\n      >\n        {t(\"Load More\")}\n      </Button>;\n  }\n\n  const columns = [\n    {\n      dataField: \"createdAt\",\n      text: t(\"Date and Time\"),\n      sort: true,\n      formatter: dateFormatter,\n    },\n    {\n      dataField: \"message\",\n      text: t(\"Message\"),\n      sort: true,\n      formatter: (val) => getLogMessage(val),\n    },\n  ];\n\n  return (\n    <>\n      <MetaTags>\n        <title>{t(\"Activities\")}</title>\n      </MetaTags>\n      <Container>\n        <div className=\"page-content mt-5\">\n          <PageHeader title=\"Activities\n          \"></PageHeader>\n          <div>\n            <CardWrapper className=\"mt-4 p-4 glass-card shadow\">\n              <div className=\"border rounded-3 mt-4\">\n                <Table borderless responsive className=\"text-center mb-0\" >\n                  <Thead className=\"text-center table-light\">\n                    <Tr>\n                      {columns.map((column, index) => (\n                        <Th data-priority={index} key={index} className=\"color-primary\"> \n                          {column.text}\n                        </Th>\n                      ))}\n                    </Tr>\n                  </Thead>\n                  <Tbody>\n                    {loading && <Loader />}\n                    {logs?.length > 0 && logs.map((log, index) => (\n                      <tr key={index} className=\"border-top\">\n                        <td className=\"font-weight-bold\">{dateFormatter(log)}</td>\n                        <td className=\"font-weight-bold\">{getLogMessage(log)}</td>\n                      </tr>\n                    ))}\n                  </Tbody>\n                </Table>\n              </div>\n              <div className=\"mt-4\">\n                {renderLoadBtn()}\n              </div>\n            </CardWrapper>\n          </div>\n        </div>\n      </Container>\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  logs: (state.logs.logs && state.logs.logs.docs) || [],\n  totalDocs: state.logs.logs.totalDocs,\n  logsLoaded: state.logs.logsLoaded,\n  loading: state.logs.loading,\n});\n\nexport default connect(mapStateToProps, null)(withTranslation()(Activites));"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}