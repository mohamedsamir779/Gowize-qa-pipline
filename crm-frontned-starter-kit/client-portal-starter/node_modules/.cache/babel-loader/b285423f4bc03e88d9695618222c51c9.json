{"ast":null,"code":"import{useState,useEffect,useRef}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{AvForm,AvField,AvGroup,AvFeedback}from\"availity-reactstrap-validation\";import{Container,Col,Row,Label,Button}from\"reactstrap\";import MetaTags from\"react-meta-tags\";import{withTranslation}from\"react-i18next\";import Icofont from\"react-icofont\";import{getAccountsStart,updatePassword}from\"../../../store/actions\";import CardWrapper from\"components/Common/CardWrapper\";import PageHeader from\"components/Forex/Common/PageHeader\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Transfers=props=>{var _accounts$;const dispatch=useDispatch();const formRef=useRef();const{accounts,submitting}=useSelector(state=>state.forex.accounts);useEffect(()=>{dispatch(getAccountsStart());},[]);const[showPassword,setShowPassword]=useState(false);const handleShowPassword=()=>{setShowPassword(!showPassword);};const confirmPassword=(value,ctx,input,cb)=>{if(value!==ctx.password)cb(\"Password doesn't match!\");else cb(true);};const handleValidSubmit=(event,values)=>{dispatch(updatePassword({_id:values.account,body:{password:values.password,type:values.type}}));formRef.current.reset();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MetaTags,{children:/*#__PURE__*/_jsx(\"title\",{children:props.t(\"Change Password\")})}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-content mt-5\",children:[/*#__PURE__*/_jsx(PageHeader,{title:\"Change Password\"}),/*#__PURE__*/_jsxs(CardWrapper,{className:\"mt-4 p-4 glass-card\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-between\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"\",children:props.t(\"Change Password\")})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(AvForm,{ref:formRef,onValidSubmit:(e,v)=>{handleValidSubmit(e,v);},children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"6\",children:/*#__PURE__*/_jsxs(AvField,{type:\"select\",name:\"account\",value:accounts&&((_accounts$=accounts[0])===null||_accounts$===void 0?void 0:_accounts$._id),label:props.t(\"Account No.*\"),className:\"mt-1 mb-2 form-select\",required:true,children:[accounts===null||accounts===void 0?void 0:accounts.map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account._id,children:[account.login,\" (\",account.type,\")\"]},account.login)),\";\"]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",className:\"mt-3 mt-md-0\",children:/*#__PURE__*/_jsxs(AvField,{type:\"select\",name:\"type\",value:\"main\",label:props.t(\"Type*\"),className:\"mt-1 mb-2 form-select\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:props.t(\"main\"),children:props.t(\"Master\")}),/*#__PURE__*/_jsx(\"option\",{value:props.t(\"investor\"),children:props.t(\"Investor\")})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",className:\"mt-3\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsxs(Label,{for:\"password\",className:\"mb-1 d-flex align-items-center\",children:[props.t(\"New Password\"),/*#__PURE__*/_jsx(Icofont,{icon:showPassword?\"eye-blocked\":\"eye\",className:\"show-password\",onClick:handleShowPassword})]}),/*#__PURE__*/_jsx(AvField,{name:\"password\",type:showPassword?\"text\":\"password\",id:\"password\",validate:{required:{value:true,errorMessage:\"Password is required\"},pattern:{value:/^(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]/,errorMessage:\"Password must contain at least one uppercase letter and one number\"},minLength:{value:7,errorMessage:\"Password must be more than 6 characters\"}}})]})}),/*#__PURE__*/_jsx(Col,{md:\"6\",className:\"mt-3\",children:/*#__PURE__*/_jsxs(AvGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"confirm_password\",className:\"mb-1\",children:props.t(\"Confirm Password\")}),/*#__PURE__*/_jsx(AvField,{name:\"confirm_password\",type:\"password\",id:\"confirm_password\",validate:{required:{value:true,errorMessage:\"Password is required\"},custom:confirmPassword}}),/*#__PURE__*/_jsx(AvFeedback,{children:props.t(\"Password doesn't match\")})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:submitting,className:\"color-bg-btn border-0 px-4\",children:props.t(\"Change Password\")})})]})})]})]})})]});};export default withTranslation()(Transfers);","map":{"version":3,"names":["useState","useEffect","useRef","useDispatch","useSelector","AvForm","AvField","AvGroup","AvFeedback","Container","Col","Row","Label","Button","MetaTags","withTranslation","Icofont","getAccountsStart","updatePassword","CardWrapper","PageHeader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Transfers","props","_accounts$","dispatch","formRef","accounts","submitting","state","forex","showPassword","setShowPassword","handleShowPassword","confirmPassword","value","ctx","input","cb","password","handleValidSubmit","event","values","_id","account","body","type","current","reset","children","t","className","title","ref","onValidSubmit","e","v","md","name","label","required","map","login","for","icon","onClick","id","validate","errorMessage","pattern","minLength","custom","disabled"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Forex/ChangePassword/index.js"],"sourcesContent":["import {\n  useState, useEffect, useRef\n} from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  AvForm, AvField, AvGroup, AvFeedback\n} from \"availity-reactstrap-validation\";\nimport {\n  Container, Col, Row,\n  Label, Button,\n} from \"reactstrap\";\nimport MetaTags from \"react-meta-tags\";\nimport { withTranslation } from \"react-i18next\";\nimport Icofont from \"react-icofont\";\nimport { getAccountsStart, updatePassword } from \"../../../store/actions\";\n\nimport CardWrapper from \"components/Common/CardWrapper\";\nimport PageHeader from \"components/Forex/Common/PageHeader\";\n\nconst Transfers = (props) => {\n  const dispatch = useDispatch();\n  const formRef = useRef();\n  const { accounts, submitting } = useSelector((state) => state.forex.accounts);\n\n  useEffect(() => {\n    dispatch(getAccountsStart());\n  }, []);\n\n  const [showPassword, setShowPassword] = useState(false);\n  const handleShowPassword = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const confirmPassword = (value, ctx, input, cb) => {\n    if (value !== ctx.password) cb(\"Password doesn't match!\");\n    else cb(true);\n  };\n\n  const handleValidSubmit = (event, values) => {\n    dispatch(updatePassword({\n      _id: values.account,\n      body: {\n        password: values.password,\n        type: values.type,\n      }\n    }));\n    formRef.current.reset();\n  };\n\n  return (\n    <>\n      <MetaTags>\n        <title>{props.t(\"Change Password\")}</title>\n      </MetaTags>\n      <Container>\n        <div className=\"page-content mt-5\">\n          <PageHeader title=\"Change Password\"></PageHeader>\n          <CardWrapper className=\"mt-4 p-4 glass-card\">\n            <Row className=\"mb-4\">\n              <Col className=\"d-flex justify-content-between\">\n                <h3 className=\"\">{props.t(\"Change Password\")}</h3>\n              </Col>\n            </Row>\n            <Row>\n              <AvForm\n                ref={formRef}\n                onValidSubmit={(e, v) => {\n                  handleValidSubmit(e, v);\n                }}\n              >\n                <Row>\n                  <Col md=\"6\">\n                    <AvField type=\"select\" name=\"account\" value={accounts && accounts[0]?._id} label={props.t(\"Account No.*\")} className=\"mt-1 mb-2 form-select\" required>\n                      {accounts?.map((account) =>\n                        <option key={account.login} value={account._id}>{account.login} ({account.type})</option>\n                      )};\n                    </AvField>\n                  </Col>\n                  <Col md=\"6\" className=\"mt-3 mt-md-0\">\n                    <AvField type=\"select\" name=\"type\" value={\"main\"} label={props.t(\"Type*\")} className=\"mt-1 mb-2 form-select\" required>\n                      <option value={props.t(\"main\")}>{props.t(\"Master\")}</option>\n                      <option value={props.t(\"investor\")}>{props.t(\"Investor\")}</option>\n                    </AvField>\n                  </Col>\n                  <Col md=\"6\" className=\"mt-3\">\n                    <AvGroup>\n                      <Label for=\"password\" className=\"mb-1 d-flex align-items-center\">{props.t(\"New Password\")}\n                        <Icofont icon={showPassword ? \"eye-blocked\" : \"eye\"} className=\"show-password\"\n                          onClick={handleShowPassword}\n                        ></Icofont>\n                      </Label>\n                      <AvField name=\"password\" type={showPassword ? \"text\" : \"password\"} id=\"password\"\n                        validate={{\n                          required: {\n                            value: true,\n                            errorMessage: \"Password is required\"\n                          },\n                          pattern: {\n                            value: /^(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]/,\n                            errorMessage: \"Password must contain at least one uppercase letter and one number\"\n                          },\n                          minLength: {\n                            value: 7,\n                            errorMessage: \"Password must be more than 6 characters\"\n                          },\n                        }} />\n                      \n                    </AvGroup>\n                  </Col>\n                  <Col md=\"6\" className=\"mt-3\">\n                    <AvGroup>\n                      <Label for=\"confirm_password\" className=\"mb-1\">{props.t(\"Confirm Password\")}</Label>\n                      <AvField name=\"confirm_password\" type=\"password\" id=\"confirm_password\"\n                        validate={{\n                          required: {\n                            value: true,\n                            errorMessage: \"Password is required\"\n                          },\n                          custom: confirmPassword\n                        }}\n                      />\n                      <AvFeedback>{props.t(\"Password doesn't match\")}</AvFeedback>\n                    </AvGroup>\n                  </Col>\n                </Row>\n                <div className=\"text-center mt-4\">\n                  <Button type=\"submit\" disabled={submitting} className=\"color-bg-btn border-0 px-4\">{props.t(\"Change Password\")}</Button>\n                </div>\n              </AvForm>\n            </Row>\n          </CardWrapper>\n        </div>\n      </Container>\n    </>\n  );\n};\n\nexport default withTranslation()(Transfers);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}