{"ast":null,"code":"import{useDispatch,useSelector}from\"react-redux\";import{AvForm,AvField}from\"availity-reactstrap-validation\";import{Modal,ModalHeader,ModalBody,Button}from\"reactstrap\";import{withTranslation}from\"react-i18next\";import{createChangeLeverageRequest,getAccountTypesStart}from\"store/actions\";import Loader from\"components/Common/Loader\";import{useEffect,useState}from\"react\";import config from\"config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LeverageModal=_ref=>{var _accounts$,_ref2;let{isOpen,toggle,accounts,t}=_ref;const dispatch=useDispatch();const[selectedAccount,setSelectedAccount]=useState((_accounts$=accounts[0])===null||_accounts$===void 0?void 0:_accounts$._id);const[selectedLeverage,setSelectedLeverage]=useState(config.LEVERAGES);const createChangeLeverageRequestLoading=useSelector(state=>state.forex.requests.createChangeLeverageRequestLoading);const handleValidSubmit=(event,values)=>{dispatch(createChangeLeverageRequest({_id:values.account,to:values.leverage,from:values.from,login:values.login,platform:values.platform}));};const{accountTypes,submitting}=useSelector(state=>state.forex.accounts);useEffect(()=>{if(accounts.length>0){setSelectedAccount(accounts[0]._id);}},[accounts]);useEffect(()=>{dispatch(getAccountTypesStart({forCp:true}));return()=>{dispatch(getAccountTypesStart());};},[]);useEffect(()=>{if(!selectedAccount||!accountTypes.length)return;const account=accounts.find(acc=>acc._id===selectedAccount);const type=accountTypes.find(typee=>typee._id===(account===null||account===void 0?void 0:account.accountTypeId._id));setSelectedLeverage((type===null||type===void 0?void 0:type.leverages)||config.LEVERAGES);},[selectedAccount,accountTypes]);return/*#__PURE__*/_jsxs(Modal,{centered:true,isOpen:isOpen,toggle:toggle,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggle,tag:\"h4\",children:t(\"Change Leverage\")}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsxs(AvForm,{onValidSubmit:(e,v)=>{var _accounts$filter$,_accounts$filter$2,_accounts$filter$3;v.from=(_accounts$filter$=accounts.filter(account=>account._id==v.account)[0])===null||_accounts$filter$===void 0?void 0:_accounts$filter$.MarginLeverage;v.login=(_accounts$filter$2=accounts.filter(account=>account._id==v.account)[0])===null||_accounts$filter$2===void 0?void 0:_accounts$filter$2.login;v.platform=(_accounts$filter$3=accounts.filter(account=>account._id==v.account)[0])===null||_accounts$filter$3===void 0?void 0:_accounts$filter$3.platform;handleValidSubmit(e,v);},children:[/*#__PURE__*/_jsxs(AvField,{type:\"select\",name:\"account\",value:accounts[0]._id,label:t(\"Select Account\"),className:\"form-select mt-1 mb-2\",required:true,onChange:e=>setSelectedAccount(e.target.value),children:[accounts.map(account=>/*#__PURE__*/_jsx(\"option\",{value:account._id,children:account.login},account.login)),\";\"]}),/*#__PURE__*/_jsx(AvField,{type:\"select\",name:\"leverage\",value:\"100\",label:t(\"Select Leverage\"),className:\"form-select mt-1\",required:true,children:(_ref2=selectedLeverage||config.LEVERAGES)===null||_ref2===void 0?void 0:_ref2.map(leverage=>/*#__PURE__*/_jsxs(\"option\",{value:leverage,children:[\"1:\",leverage]},leverage))}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3 mb-1\",children:createChangeLeverageRequestLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"border-0 color-bg-btn shadow\",children:t(\"Change\")})})]})})]});};export default withTranslation()(LeverageModal);","map":{"version":3,"names":["useDispatch","useSelector","AvForm","AvField","Modal","ModalHeader","ModalBody","Button","withTranslation","createChangeLeverageRequest","getAccountTypesStart","Loader","useEffect","useState","config","jsx","_jsx","jsxs","_jsxs","LeverageModal","_ref","_accounts$","_ref2","isOpen","toggle","accounts","t","dispatch","selectedAccount","setSelectedAccount","_id","selectedLeverage","setSelectedLeverage","LEVERAGES","createChangeLeverageRequestLoading","state","forex","requests","handleValidSubmit","event","values","account","to","leverage","from","login","platform","accountTypes","submitting","length","forCp","find","acc","type","typee","accountTypeId","leverages","centered","children","tag","onValidSubmit","e","v","_accounts$filter$","_accounts$filter$2","_accounts$filter$3","filter","MarginLeverage","name","value","label","className","required","onChange","target","map"],"sources":["/home/ubuntu/Gowize-qa-pipline/client-portal-starter/src/pages/Forex/Accounts/LeverageModal.js"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport { AvForm, AvField } from \"availity-reactstrap-validation\";\nimport { \n  Modal, ModalHeader, ModalBody, Button\n } from \"reactstrap\";\nimport { withTranslation } from \"react-i18next\";\nimport {\n  createChangeLeverageRequest,\n  getAccountTypesStart,\n} from \"store/actions\";\nimport Loader from \"components/Common/Loader\";\nimport { useEffect, useState } from \"react\";\nimport config from \"config\";\n\nconst LeverageModal = ({ isOpen, toggle, accounts, t }) => {\n  const dispatch = useDispatch();\n  const [selectedAccount, setSelectedAccount] = useState(accounts[0]?._id);\n  const [selectedLeverage, setSelectedLeverage] = useState(config.LEVERAGES);\n  const createChangeLeverageRequestLoading = useSelector(\n    (state) => state.forex.requests.createChangeLeverageRequestLoading\n  );\n  const handleValidSubmit = (event, values) => {\n    dispatch(\n      createChangeLeverageRequest({\n        _id: values.account,\n        to: values.leverage,\n        from: values.from,\n        login: values.login,\n        platform: values.platform,\n      })\n    );\n  };\n  const { accountTypes, submitting } = useSelector(\n    (state) => state.forex.accounts\n  );\n\n  useEffect(() => {\n    if (accounts.length > 0) {\n      setSelectedAccount(accounts[0]._id);\n    }\n  }, [accounts]);\n\n  useEffect(() => {\n    dispatch(\n      getAccountTypesStart({\n        forCp: true,\n      })\n    );\n    return () => {\n      dispatch(getAccountTypesStart());\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!selectedAccount || !accountTypes.length) return;\n  \n    const account = accounts.find(acc => acc._id === selectedAccount);\n    const type = accountTypes.find(typee => typee._id === account?.accountTypeId._id);\n    \n    setSelectedLeverage(type?.leverages || config.LEVERAGES);\n    \n  }, [selectedAccount, accountTypes]);\n\n  return (\n    <Modal centered isOpen={isOpen} toggle={toggle}>\n      <ModalHeader toggle={toggle} tag=\"h4\">\n        {t(\"Change Leverage\")}\n      </ModalHeader>\n      <ModalBody>\n        <AvForm\n          onValidSubmit={(e, v) => {\n            v.from = accounts.filter(\n              (account) => account._id == v.account\n            )[0]?.MarginLeverage;\n            v.login = accounts.filter(\n              (account) => account._id == v.account\n            )[0]?.login;\n            v.platform = accounts.filter(\n              (account) => account._id == v.account\n            )[0]?.platform;\n            handleValidSubmit(e, v);\n          }}\n        >\n          <AvField\n            type=\"select\"\n            name=\"account\"\n            value={accounts[0]._id}\n            label={t(\"Select Account\")}\n            className=\"form-select mt-1 mb-2\"\n            required\n            onChange={(e) => setSelectedAccount(e.target.value)}\n          >\n            {accounts.map((account) => (\n              <option key={account.login} value={account._id}>\n                {account.login}\n              </option>\n            ))}\n            ;\n          </AvField>\n          <AvField\n            type=\"select\"\n            name=\"leverage\"\n            value={\"100\"}\n            label={t(\"Select Leverage\")}\n            className=\"form-select mt-1\"\n            required\n          >\n            {(selectedLeverage || config.LEVERAGES)?.map((leverage) => (\n              <option key={leverage} value={leverage}>\n                1:{leverage}\n              </option>\n            ))}\n          </AvField>\n          <div className=\"text-center mt-3 mb-1\">\n            {createChangeLeverageRequestLoading ? (\n              <Loader />\n            ) : (\n              <Button type=\"submit\" className=\"border-0 color-bg-btn shadow\">\n                {t(\"Change\")}\n              </Button>\n            )}\n          </div>\n        </AvForm>\n      </ModalBody>\n    </Modal>\n  );\n};\n\nexport default withTranslation()(LeverageModal);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}