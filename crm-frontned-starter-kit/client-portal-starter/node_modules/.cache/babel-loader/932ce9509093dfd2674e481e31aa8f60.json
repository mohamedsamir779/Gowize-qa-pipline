{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/king/portal/client-portal-starter/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{useTranslation}from\"react-i18next\";import{Tr,Td}from\"react-super-responsive-table\";import AllAccountsModal from\"./AllAccountsModal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RecursiveTableRows=_ref=>{let{data,filter}=_ref;const{t}=useTranslation();const[viewAccounts,setViewAccounts]=useState(false);const toggleViewAccounts=()=>setViewAccounts(!viewAccounts);const[accounts,setAccounts]=useState(data.childs);const[modalAccounts,setModalAccounts]=useState([]);const[showNested,setShowNested]=useState(false);const toggleNested=name=>{setShowNested(_objectSpread(_objectSpread({},showNested),{},{[name]:!showNested[name]}));};useEffect(()=>{if(data.childs){const accounts=data.childs;if(filter){setAccounts(accounts.filter(account=>account.fx.agrementId==filter||account.fx.agrementId===undefined));}else{setAccounts(accounts);}}},[filter,data.childs]);return accounts?accounts.map(parent=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsxs(Td,{className:\"py-2\",children:[parent.childs&&/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"mdi mdi-chevron-down me-2\",onClick:()=>toggleNested(parent._id)}),parent===null||parent===void 0?void 0:parent.firstName,\" \",parent===null||parent===void 0?void 0:parent.lastName]}),/*#__PURE__*/_jsx(Td,{className:\"py-2\",children:parent.fx.isIb?t(\"Sub IB\"):t(\"Client\")}),/*#__PURE__*/_jsx(Td,{className:\"py-2\",children:parent.fx.isIb?\"-\":parent.fx.liveAcc.length>0?/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"mdi mdi-eye font-size-18 py-0\"// eslint-disable-next-line react/jsx-indent-props\n,onClick:()=>{setModalAccounts(parent.fx.liveAcc);toggleViewAccounts();}}):t(\"No Accounts\")}),/*#__PURE__*/_jsxs(Td,{className:\"py-2\",children:[data.firstName,\" \",data.lastName]})]}),showNested[parent._id]&&parent.childs&&/*#__PURE__*/_jsx(RecursiveTableRows,{data:parent,filter:filter}),/*#__PURE__*/_jsx(AllAccountsModal,{show:viewAccounts,toggle:toggleViewAccounts,accounts:modalAccounts})]},parent._id)):/*#__PURE__*/_jsx(Tr,{children:/*#__PURE__*/_jsx(Td,{colSpan:\"4\",children:t(\"No referrals found.\")})});};export default RecursiveTableRows;","map":{"version":3,"names":["React","useState","useEffect","Link","useTranslation","Tr","Td","AllAccountsModal","jsx","_jsx","jsxs","_jsxs","RecursiveTableRows","_ref","data","filter","t","viewAccounts","setViewAccounts","toggleViewAccounts","accounts","setAccounts","childs","modalAccounts","setModalAccounts","showNested","setShowNested","toggleNested","name","_objectSpread","account","fx","agrementId","undefined","map","parent","Fragment","children","className","to","onClick","_id","firstName","lastName","isIb","liveAcc","length","show","toggle","colSpan"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Forex/Partnership/Referrals/RecursiveTableRows.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { Tr, Td } from \"react-super-responsive-table\";\nimport AllAccountsModal from \"./AllAccountsModal\";\n\nconst RecursiveTableRows = ({ data, filter }) => {\n  const { t } = useTranslation();\n\n  const [viewAccounts, setViewAccounts] = useState(false);\n  const toggleViewAccounts = () => setViewAccounts(!viewAccounts);\n  const [accounts, setAccounts] = useState(data.childs);\n  const [modalAccounts, setModalAccounts] = useState([]);\n\n  const [showNested, setShowNested] = useState(false);\n  const toggleNested = (name) => {\n    setShowNested({\n      ...showNested,\n      [name]: !showNested[name]\n    });\n  };\n\n  useEffect(() => {\n    if (data.childs) {\n      const accounts = data.childs;\n      if (filter){\n        setAccounts(accounts.filter(\n          account => ((account.fx.agrementId == filter) || account.fx.agrementId === undefined)\n        ));\n      } else {\n        setAccounts(accounts);\n      }\n    }\n  }, [filter, data.childs]);\n\n  return (accounts ?\n    accounts.map((parent) =>\n      <React.Fragment key={parent._id}>\n        <Tr>\n          <Td className=\"py-2\">\n            {parent.childs &&\n              <Link to=\"#\"\n                className=\"mdi mdi-chevron-down me-2\"\n                onClick={() => toggleNested(parent._id)}\n              ></Link>\n            }\n            {parent?.firstName} {parent?.lastName}\n          </Td>\n          <Td className=\"py-2\">{parent.fx.isIb ? t(\"Sub IB\") : t(\"Client\")}</Td>\n          {/* acc num */}\n          <Td className=\"py-2\">\n            { parent.fx.isIb ?  \"-\" : parent.fx.liveAcc.length > 0  ? \n              <Link to=\"#\" className=\"mdi mdi-eye font-size-18 py-0\"\n              // eslint-disable-next-line react/jsx-indent-props\n                onClick={()=>{\n                  setModalAccounts(parent.fx.liveAcc);\n                  toggleViewAccounts();\n                }}\n              >\n              </Link>\n              : t(\"No Accounts\")\n            }\n          </Td>\n          <Td className=\"py-2\">{data.firstName} {data.lastName}</Td>\n        </Tr>\n        {showNested[parent._id] && parent.childs && <RecursiveTableRows data={parent} filter={filter} />}\n        <AllAccountsModal show={viewAccounts} toggle={toggleViewAccounts} accounts={modalAccounts} />\n      </React.Fragment>\n    )\n    : <Tr><Td colSpan=\"4\">{t(\"No referrals found.\")}</Td></Tr>\n  );\n};\n\nexport default RecursiveTableRows;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}