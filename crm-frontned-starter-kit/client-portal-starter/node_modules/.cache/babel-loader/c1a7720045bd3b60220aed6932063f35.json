{"ast":null,"code":"import{useSelector}from\"react-redux\";import{Table,Col,Row,Spinner}from\"reactstrap\";import{withTranslation}from\"react-i18next\";import moment from\"moment\";import CustomPagination from\"components/Common/CustomPagination\";import CardWrapper from\"components/Common/CardWrapper\";import{useState,useEffect}from\"react\";import{Th,Thead,Tr}from\"react-super-responsive-table\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ClosedPosition=props=>{const{closed:closedPosition,loading}=useSelector(state=>state.forex.accounts.positions);const[sizePerPage,setSizePerPage]=useState(10);const[page,setPage]=useState(1);const[paginatedPositions,setPaginatedPositions]=useState([]);const totalPositions=closedPosition?closedPosition.length:0;const totalPages=Math.ceil(totalPositions/sizePerPage);const hasPrevPage=page>1;const hasNextPage=page<totalPages;useEffect(()=>{setSizePerPage(10);setPage(1);},[closedPosition]);useEffect(()=>{if(closedPosition){const start=(page-1)*sizePerPage;const end=start+sizePerPage;setPaginatedPositions(closedPosition.slice(start,end));}},[page,sizePerPage,closedPosition]);const columns=[{dataField:\"PositionID\",text:\"#\",formatter:val=>{return val===null||val===void 0?void 0:val.Position;}},{dataField:\"Action\",text:props.t(\"Deal Type\"),formatter:val=>(val===null||val===void 0?void 0:val.Action)===\"0\"?props.t(\"Buy\"):props.t(\"Sell\")},{dataField:\"Symbol\",text:props.t(\"Symbol\")},{dataField:\"Profit\",text:props.t(\"Profit\")},{dataField:\"PricePosition\",text:props.t(\"Open Price\"),formatter:val=>{return val===null||val===void 0?void 0:val.PriceOpen;}},{dataField:\"Price\",text:props.t(\"Close Price\"),formatter:val=>{return val===null||val===void 0?void 0:val.PriceClose;}},{dataField:\"Volume\",text:props.t(\"Volume\"),formatter:val=>parseFloat((val===null||val===void 0?void 0:val.Volume)/100000).toFixed(2)},{dataField:\"Time\",text:props.t(\"Created Time\"),formatter:val=>moment(val===null||val===void 0?void 0:val.TimeCreate).format(\"DD-MM-YYYY HH:mm:ss\")}];return/*#__PURE__*/_jsxs(CardWrapper,{className:\"mt-3 px-5 py-4 glass-card\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-between\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"color-primary\",children:props.t(\"Closed Positions\")})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 border rounded-3\",children:/*#__PURE__*/_jsxs(Table,{borderless:true,responsive:true,className:\"text-center mb-0\",children:[/*#__PURE__*/_jsx(Thead,{className:\"text-center table-light\",children:/*#__PURE__*/_jsx(Tr,{children:columns.map((column,index)=>/*#__PURE__*/_jsx(Th,{\"data-priority\":index,className:\"color-primary\",children:column.text},index))})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"border-top font-weight-bold\",children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"py-4\",colSpan:\"100%\",children:/*#__PURE__*/_jsx(Spinner,{})})}):!props.accountId?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"100%\",className:\"my-2\",children:props.t(\"Please select an account.\")})}):(closedPosition===null||closedPosition===void 0?void 0:closedPosition.length)===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"100%\",className:\"my-2\",children:props.t(\"No closed positions for this account.\")})}):paginatedPositions.map(pos=>/*#__PURE__*/_jsx(\"tr\",{className:\"border-top\",children:columns.map((column,index)=>/*#__PURE__*/_jsx(\"td\",{\"data-priority\":index,children:column.formatter?column.formatter(pos):pos[column.dataField]},index))},pos.PositionID))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(CustomPagination,{isClientSide:true,totalDocs:totalPositions,page:page,hasNextPage:hasNextPage,hasPrevPage:hasPrevPage,totalPages:totalPages,setSizePerPage:size=>{setSizePerPage(size);setPage(1);},sizePerPage:sizePerPage,onChange:setPage})})]});};export default withTranslation()(ClosedPosition);","map":{"version":3,"names":["useSelector","Table","Col","Row","Spinner","withTranslation","moment","CustomPagination","CardWrapper","useState","useEffect","Th","Thead","Tr","jsx","_jsx","jsxs","_jsxs","ClosedPosition","props","closed","closedPosition","loading","state","forex","accounts","positions","sizePerPage","setSizePerPage","page","setPage","paginatedPositions","setPaginatedPositions","totalPositions","length","totalPages","Math","ceil","hasPrevPage","hasNextPage","start","end","slice","columns","dataField","text","formatter","val","Position","t","Action","PriceOpen","PriceClose","parseFloat","Volume","toFixed","TimeCreate","format","className","children","borderless","responsive","map","column","index","colSpan","accountId","pos","PositionID","isClientSide","totalDocs","size","onChange"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Forex/Accounts/ClosedPositions.js"],"sourcesContent":["import { useSelector } from \"react-redux\";\nimport {\n  Table, Col, Row, Spinner\n} from \"reactstrap\";\nimport { withTranslation } from \"react-i18next\";\n\nimport moment from \"moment\";\nimport CustomPagination from \"components/Common/CustomPagination\";\nimport CardWrapper from \"components/Common/CardWrapper\";\nimport { useState, useEffect } from \"react\";\nimport {\n  Th,\n  Thead,\n  Tr\n} from \"react-super-responsive-table\";\n\nconst ClosedPosition = (props) => {\n  const { closed: closedPosition, loading } = useSelector((state) => state.forex.accounts.positions);\n\n  const [sizePerPage, setSizePerPage] = useState(10);\n  const [page, setPage] = useState(1);\n  const [paginatedPositions, setPaginatedPositions] = useState([]);\n  const totalPositions = closedPosition ? closedPosition.length : 0;\n  \n  const totalPages = Math.ceil(totalPositions / sizePerPage);\n  const hasPrevPage = page > 1;\n  const hasNextPage = page < totalPages;\n\n  useEffect(() => {\n    setSizePerPage(10);\n    setPage(1);\n  }, [closedPosition]);\n\n  useEffect(() => {\n    if (closedPosition) {\n      const start = (page - 1) * sizePerPage;\n      const end = start + sizePerPage;\n      setPaginatedPositions(closedPosition.slice(start, end));\n    }\n  }, [page, sizePerPage, closedPosition]);\n\n  const columns = [\n    {\n      dataField: \"PositionID\",\n      text: \"#\",\n      formatter: (val) => { return val?.Position}\n    },\n    {\n      dataField: \"Action\",\n      text: props.t(\"Deal Type\"),\n      formatter: (val) => (val?.Action === \"0\" ? props.t(\"Buy\") : props.t(\"Sell\"))\n    },\n    {\n      dataField: \"Symbol\",\n      text: props.t(\"Symbol\"),\n    },\n    {\n      dataField: \"Profit\",\n      text: props.t(\"Profit\"),\n\n    },\n    {\n      dataField: \"PricePosition\",\n      text: props.t(\"Open Price\"),\n      formatter: (val) => { return val?.PriceOpen}\n    },\n    {\n      dataField: \"Price\",\n      text: props.t(\"Close Price\"),\n      formatter: (val) => { return val?.PriceClose}\n    },\n    {\n      dataField: \"Volume\",\n      text: props.t(\"Volume\"),\n      formatter: (val) => parseFloat(val?.Volume / 100000).toFixed(2),\n    },\n    {\n      dataField: \"Time\",\n      text: props.t(\"Created Time\"),\n      formatter: (val) => moment(val?.TimeCreate).format(\"DD-MM-YYYY HH:mm:ss\"),\n    },\n  ];\n\n  return (\n    <CardWrapper className=\"mt-3 px-5 py-4 glass-card\">\n      <Row>\n        <Col className=\"d-flex justify-content-between\">\n          <h3 className=\"color-primary\">{props.t(\"Closed Positions\")}</h3>\n        </Col>\n      </Row>\n      <div className=\"mt-4 border rounded-3\">\n        <Table borderless responsive className=\"text-center mb-0\" >\n          <Thead className=\"text-center table-light\">\n            <Tr>\n              {columns.map((column, index) => (\n                <Th data-priority={index} key={index} className=\"color-primary\"> \n                  {column.text}\n                </Th>\n              ))}\n            </Tr>\n          </Thead>\n          <tbody className=\"border-top font-weight-bold\">\n            {loading\n              ? <tr><td className=\"py-4\" colSpan=\"100%\"><Spinner /></td></tr>\n              : !props.accountId\n                ? <tr><td colSpan=\"100%\" className=\"my-2\">{props.t(\"Please select an account.\")}</td></tr>\n                : closedPosition?.length === 0\n                  ? <tr><td colSpan=\"100%\" className=\"my-2\">{props.t(\"No closed positions for this account.\")}</td></tr>\n                  : paginatedPositions.map((pos) => \n                    <tr key={pos.PositionID} className=\"border-top\">\n                      {columns.map((column, index) => (\n                        <td data-priority={index} key={index}>\n                          {column.formatter ? column.formatter(pos) : pos[column.dataField]}\n                        </td>\n                      ))}\n                    </tr>\n                  )\n            }\n          </tbody>\n\n        </Table>\n      </div>\n      <div className=\"mt-4\">\n        <CustomPagination\n          isClientSide\n          totalDocs={totalPositions}\n          page={page}\n          hasNextPage={hasNextPage}\n          hasPrevPage={hasPrevPage}\n          totalPages={totalPages}\n          setSizePerPage={\n            (size) => {\n              setSizePerPage(size);\n              setPage(1);\n            }\n          }\n          sizePerPage={sizePerPage}\n          onChange={setPage}\n          \n        />\n      </div>\n    </CardWrapper>\n  );\n};\n\nexport default withTranslation()(ClosedPosition);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}