{"ast":null,"code":"import React from\"react\";import{Alert,Input,InputGroup,Label}from\"reactstrap\";import{default as AvFieldSelect}from\"components/Common/AvFieldSelect\";import{useSelector,useDispatch}from\"react-redux\";import Loader from\"components/Common/Loader\";import{payeeAccounts}from\"../Methods/PerfectMoney\";import{AvField}from\"availity-reactstrap-validation\";import{useEffect}from\"react\";import{getAccountsStart}from\"store/actions\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Mt5Details(props){var _selectedAccount$,_selectedAccount$2,_selectedAccount$3,_selectedAccount$3$ac,_selectedAccount$4,_selectedAccount$4$ac;const dispatch=useDispatch();const{t,amount,setAmount,amountValidation,amountError,selectedPaymentMethod,setPayeeAccount,setNotes,setAmountValidation,selectedAccount,setSelectedAccount,minDepositAmount}=props;const{accounts,loading}=useSelector(state=>{var _state$forex;return state===null||state===void 0?void 0:(_state$forex=state.forex)===null||_state$forex===void 0?void 0:_state$forex.accounts;});useEffect(()=>{dispatch(getAccountsStart({}));},[]);const handleAccountChange=event=>{setSelectedAccount(accounts===null||accounts===void 0?void 0:accounts.filter(acc=>acc._id===event));};return/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",children:loading?/*#__PURE__*/_jsx(Loader,{}):accounts&&/*#__PURE__*/_jsxs(_Fragment,{children:[selectedPaymentMethod===\"PERFECT_MONEY\"?/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(AvFieldSelect,{name:\"payeeAccount\",required:true,options:payeeAccounts===null||payeeAccounts===void 0?void 0:payeeAccounts.map(acc=>{return{label:acc.name,value:acc};}),onChange:e=>{setPayeeAccount(e);},type:\"text\",errorMessage:t(\"Payee account is required\"),validate:{required:{value:true}},label:t(\"Payee Account\")})}):null,/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(AvFieldSelect,{options:accounts===null||accounts===void 0?void 0:accounts.map(acc=>{var _acc$accountTypeId;return{label:\"\".concat(acc.login,\" \").concat((acc===null||acc===void 0?void 0:(_acc$accountTypeId=acc.accountTypeId)===null||_acc$accountTypeId===void 0?void 0:_acc$accountTypeId.title)||\"-\",\" (\").concat(acc.balance||acc.Balance,\" \").concat(acc.currency,\")\"),value:acc._id};}),name:\"tradingAccountId\",type:\"text\",onChange:handleAccountChange,errorMessage:t(\"CTRADER account is required\"),validate:{required:{value:true}},label:t(\"CTRADER Account\")})}),selectedPaymentMethod===\"PERFECT_MONEY\"?/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(AvField,{type:\"text\",name:\"notes\",validate:{required:true},label:t(\"Notes\")// disabled={true}\n,onChange:e=>{setNotes(e.target.value);}})}):null,amountError&&/*#__PURE__*/_jsxs(\"p\",{className:\"small text-danger \",children:[\" \",t(\"Please Select Account\")]}),selectedAccount&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"example-date-input\",className:\"form-label\",children:props.t(\"Amount (\".concat(((_selectedAccount$=selectedAccount[0])===null||_selectedAccount$===void 0?void 0:_selectedAccount$.currency)||\"USD\",\")\"))}),/*#__PURE__*/_jsx(InputGroup,{children:/*#__PURE__*/_jsx(Input,{required:true,onChange:e=>{setAmount(e.target.value);},className:\"form-control\",type:\"number\",min:\"0\",value:amount,placeholder:\"Enter 200-128341\",onKeyPress:e=>{if(!/[0-9]/.test(e.key)){e.preventDefault();}}})}),(selectedAccount===null||selectedAccount===void 0?void 0:(_selectedAccount$2=selectedAccount[0])===null||_selectedAccount$2===void 0?void 0:_selectedAccount$2.currency)===\"CENT\"&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(Alert,{color:\"warning\",children:[t(\"Conversion rate will be applied.\"),\" 1 CENT = 0.01 USD\"]})}),amountValidation&&/*#__PURE__*/_jsxs(\"p\",{className:\"small text-danger \",children:[\" \",selectedAccount!==null&&selectedAccount!==void 0&&(_selectedAccount$3=selectedAccount[0])!==null&&_selectedAccount$3!==void 0&&(_selectedAccount$3$ac=_selectedAccount$3.accountTypeId)!==null&&_selectedAccount$3$ac!==void 0&&_selectedAccount$3$ac.minDeposit?/*#__PURE__*/_jsx(_Fragment,{children:t(\"The minimum value for amount is \"+(selectedAccount===null||selectedAccount===void 0?void 0:(_selectedAccount$4=selectedAccount[0])===null||_selectedAccount$4===void 0?void 0:(_selectedAccount$4$ac=_selectedAccount$4.accountTypeId)===null||_selectedAccount$4$ac===void 0?void 0:_selectedAccount$4$ac.minDeposit))}):/*#__PURE__*/_jsx(_Fragment,{children:t(\"Please choose trading account first\")})]})]})]})});}","map":{"version":3,"names":["React","Alert","Input","InputGroup","Label","default","AvFieldSelect","useSelector","useDispatch","Loader","payeeAccounts","AvField","useEffect","getAccountsStart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Mt5Details","props","_selectedAccount$","_selectedAccount$2","_selectedAccount$3","_selectedAccount$3$ac","_selectedAccount$4","_selectedAccount$4$ac","dispatch","t","amount","setAmount","amountValidation","amountError","selectedPaymentMethod","setPayeeAccount","setNotes","setAmountValidation","selectedAccount","setSelectedAccount","minDepositAmount","accounts","loading","state","_state$forex","forex","handleAccountChange","event","filter","acc","_id","className","children","name","required","options","map","label","value","onChange","e","type","errorMessage","validate","_acc$accountTypeId","concat","login","accountTypeId","title","balance","Balance","currency","target","htmlFor","min","placeholder","onKeyPress","test","key","preventDefault","color","minDeposit"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/components/Deposit/MT5/Mt5Details.js"],"sourcesContent":["import React from \"react\";\nimport {\n  Alert, Input, InputGroup, Label\n} from \"reactstrap\";\nimport { default as AvFieldSelect } from \"components/Common/AvFieldSelect\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Loader from \"components/Common/Loader\";\nimport { payeeAccounts } from \"../Methods/PerfectMoney\";\nimport { AvField } from \"availity-reactstrap-validation\";\nimport { useEffect } from \"react\";\nimport { getAccountsStart } from \"store/actions\";\nexport default function Mt5Details(props) {\n  const dispatch = useDispatch();\n  const {\n    t,\n    amount,\n    setAmount,\n    amountValidation,\n    amountError,\n    selectedPaymentMethod,\n    setPayeeAccount,\n    setNotes,\n    setAmountValidation,\n    selectedAccount,\n    setSelectedAccount,\n    minDepositAmount\n  } = props;\n\n  const { accounts, loading } = useSelector((state) => state?.forex?.accounts);\n\n\n  useEffect(() => {\n    dispatch(\n      getAccountsStart({})\n    );\n  }, []);\n\n  const handleAccountChange = (event) => {\n    setSelectedAccount(accounts?.filter((acc) => acc._id === event));    \n  };\n\n\n  return (\n    <div className=\"w-100\">\n      {loading ? <Loader /> : accounts && (\n        <>\n          {selectedPaymentMethod === \"PERFECT_MONEY\" ?\n            (<div className=\"mt-3\">\n              <AvFieldSelect\n                name=\"payeeAccount\"\n                required\n                options={payeeAccounts?.map((acc) => {\n                  return {\n                    label: acc.name,\n                    value: acc\n                  };\n                })}\n                onChange={(e) => {\n                  setPayeeAccount(e);\n                }}\n                type=\"text\"\n                errorMessage={t(\"Payee account is required\")}\n                validate={{ required: { value: true } }}\n                label={t(\"Payee Account\")}\n              >\n              </AvFieldSelect>\n            </div>)\n            : null}\n          <div className=\"mt-3\">\n            <AvFieldSelect\n              options={\n                accounts?.map(acc => {\n                  return {\n                    label: `${acc.login} ${acc?.accountTypeId?.title || \"-\"} (${acc.balance || acc.Balance} ${acc.currency})`,\n                    value: acc._id\n                  };\n                })\n              }\n              name=\"tradingAccountId\"\n              type=\"text\"\n              onChange={handleAccountChange}\n              errorMessage={t(\"CTRADER account is required\")}\n              validate={{ required: { value: true } }}\n              label={t(\"CTRADER Account\")}\n            >\n            </AvFieldSelect>\n          </div>\n          {selectedPaymentMethod === \"PERFECT_MONEY\" ?\n            <div className=\"mt-3\">\n              <AvField\n                type=\"text\"\n                name=\"notes\"\n                validate={{ required: true }}\n                label={t(\"Notes\")}\n                // disabled={true}\n                onChange={(e) => {\n                  setNotes(e.target.value);\n                }}\n              >\n              </AvField>\n            </div>\n            : null}\n          {amountError && (\n            <p className=\"small text-danger \"> {t(\"Please Select Account\")}</p>\n          )}\n          {selectedAccount && (\n            <div className=\"mt-3\">\n\n              <Label htmlFor=\"example-date-input\" className=\"form-label\">\n                {props.t(`Amount (${selectedAccount[0]?.currency || \"USD\"})`)}\n              </Label>\n              <InputGroup>\n                <Input\n                  required\n                  onChange={(e) => {\n                    setAmount(e.target.value);\n                  }}\n                  className=\"form-control\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={amount}\n                  placeholder=\"Enter 200-128341\"\n                  onKeyPress={(e) => {\n                    if (!/[0-9]/.test(e.key)) {\n                      e.preventDefault();\n                    }\n                  }}\n                />\n              </InputGroup>\n              {selectedAccount?.[0]?.currency === \"CENT\" && (\n                <div className=\"mt-3\">\n                  <Alert color=\"warning\">\n                    {t(\"Conversion rate will be applied.\")}\n                    {\" 1 CENT = 0.01 USD\"}\n                  </Alert>\n                </div>\n              )}\n              \n              {amountValidation && (\n                <p className=\"small text-danger \"> {selectedAccount?.[0]?.accountTypeId?.minDeposit ? <>{t(\"The minimum value for amount is \" + selectedAccount?.[0]?.accountTypeId?.minDeposit )}</> : <>{t(\"Please choose trading account first\")}</>}</p>\n              )}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OACEC,KAAK,CAAEC,KAAK,CAAEC,UAAU,CAAEC,KAAK,KAC1B,YAAY,CACnB,OAASC,OAAO,GAAI,CAAAC,aAAa,KAAQ,iCAAiC,CAC1E,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,OAASC,aAAa,KAAQ,yBAAyB,CACvD,OAASC,OAAO,KAAQ,gCAAgC,CACxD,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,gBAAgB,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACjD,cAAe,SAAS,CAAAC,UAAUA,CAACC,KAAK,CAAE,KAAAC,iBAAA,CAAAC,kBAAA,CAAAC,kBAAA,CAAAC,qBAAA,CAAAC,kBAAA,CAAAC,qBAAA,CACxC,KAAM,CAAAC,QAAQ,CAAGpB,WAAW,CAAC,CAAC,CAC9B,KAAM,CACJqB,CAAC,CACDC,MAAM,CACNC,SAAS,CACTC,gBAAgB,CAChBC,WAAW,CACXC,qBAAqB,CACrBC,eAAe,CACfC,QAAQ,CACRC,mBAAmB,CACnBC,eAAe,CACfC,kBAAkB,CAClBC,gBACF,CAAC,CAAGnB,KAAK,CAET,KAAM,CAAEoB,QAAQ,CAAEC,OAAQ,CAAC,CAAGnC,WAAW,CAAEoC,KAAK,OAAAC,YAAA,OAAK,CAAAD,KAAK,SAALA,KAAK,kBAAAC,YAAA,CAALD,KAAK,CAAEE,KAAK,UAAAD,YAAA,iBAAZA,YAAA,CAAcH,QAAQ,GAAC,CAG5E7B,SAAS,CAAC,IAAM,CACdgB,QAAQ,CACNf,gBAAgB,CAAC,CAAC,CAAC,CACrB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAiC,mBAAmB,CAAIC,KAAK,EAAK,CACrCR,kBAAkB,CAACE,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEO,MAAM,CAAEC,GAAG,EAAKA,GAAG,CAACC,GAAG,GAAKH,KAAK,CAAC,CAAC,CAClE,CAAC,CAGD,mBACEhC,IAAA,QAAKoC,SAAS,CAAC,OAAO,CAAAC,QAAA,CACnBV,OAAO,cAAG3B,IAAA,CAACN,MAAM,GAAE,CAAC,CAAGgC,QAAQ,eAC9BxB,KAAA,CAAAE,SAAA,EAAAiC,QAAA,EACGlB,qBAAqB,GAAK,eAAe,cACvCnB,IAAA,QAAKoC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACpBrC,IAAA,CAACT,aAAa,EACZ+C,IAAI,CAAC,cAAc,CACnBC,QAAQ,MACRC,OAAO,CAAE7C,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAE8C,GAAG,CAAEP,GAAG,EAAK,CACnC,MAAO,CACLQ,KAAK,CAAER,GAAG,CAACI,IAAI,CACfK,KAAK,CAAET,GACT,CAAC,CACH,CAAC,CAAE,CACHU,QAAQ,CAAGC,CAAC,EAAK,CACfzB,eAAe,CAACyB,CAAC,CAAC,CACpB,CAAE,CACFC,IAAI,CAAC,MAAM,CACXC,YAAY,CAAEjC,CAAC,CAAC,2BAA2B,CAAE,CAC7CkC,QAAQ,CAAE,CAAET,QAAQ,CAAE,CAAEI,KAAK,CAAE,IAAK,CAAE,CAAE,CACxCD,KAAK,CAAE5B,CAAC,CAAC,eAAe,CAAE,CAEb,CAAC,CACb,CAAC,CACJ,IAAI,cACRd,IAAA,QAAKoC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBrC,IAAA,CAACT,aAAa,EACZiD,OAAO,CACLd,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEe,GAAG,CAACP,GAAG,EAAI,KAAAe,kBAAA,CACnB,MAAO,CACLP,KAAK,IAAAQ,MAAA,CAAKhB,GAAG,CAACiB,KAAK,MAAAD,MAAA,CAAI,CAAAhB,GAAG,SAAHA,GAAG,kBAAAe,kBAAA,CAAHf,GAAG,CAAEkB,aAAa,UAAAH,kBAAA,iBAAlBA,kBAAA,CAAoBI,KAAK,GAAI,GAAG,OAAAH,MAAA,CAAKhB,GAAG,CAACoB,OAAO,EAAIpB,GAAG,CAACqB,OAAO,MAAAL,MAAA,CAAIhB,GAAG,CAACsB,QAAQ,KAAG,CACzGb,KAAK,CAAET,GAAG,CAACC,GACb,CAAC,CACH,CAAC,CACF,CACDG,IAAI,CAAC,kBAAkB,CACvBQ,IAAI,CAAC,MAAM,CACXF,QAAQ,CAAEb,mBAAoB,CAC9BgB,YAAY,CAAEjC,CAAC,CAAC,6BAA6B,CAAE,CAC/CkC,QAAQ,CAAE,CAAET,QAAQ,CAAE,CAAEI,KAAK,CAAE,IAAK,CAAE,CAAE,CACxCD,KAAK,CAAE5B,CAAC,CAAC,iBAAiB,CAAE,CAEf,CAAC,CACb,CAAC,CACLK,qBAAqB,GAAK,eAAe,cACxCnB,IAAA,QAAKoC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBrC,IAAA,CAACJ,OAAO,EACNkD,IAAI,CAAC,MAAM,CACXR,IAAI,CAAC,OAAO,CACZU,QAAQ,CAAE,CAAET,QAAQ,CAAE,IAAK,CAAE,CAC7BG,KAAK,CAAE5B,CAAC,CAAC,OAAO,CAChB;AAAA,CACA8B,QAAQ,CAAGC,CAAC,EAAK,CACfxB,QAAQ,CAACwB,CAAC,CAACY,MAAM,CAACd,KAAK,CAAC,CAC1B,CAAE,CAEK,CAAC,CACP,CAAC,CACJ,IAAI,CACPzB,WAAW,eACVhB,KAAA,MAAGkC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAC,GAAC,CAACvB,CAAC,CAAC,uBAAuB,CAAC,EAAI,CACnE,CACAS,eAAe,eACdrB,KAAA,QAAKkC,SAAS,CAAC,MAAM,CAAAC,QAAA,eAEnBrC,IAAA,CAACX,KAAK,EAACqE,OAAO,CAAC,oBAAoB,CAACtB,SAAS,CAAC,YAAY,CAAAC,QAAA,CACvD/B,KAAK,CAACQ,CAAC,YAAAoC,MAAA,CAAY,EAAA3C,iBAAA,CAAAgB,eAAe,CAAC,CAAC,CAAC,UAAAhB,iBAAA,iBAAlBA,iBAAA,CAAoBiD,QAAQ,GAAI,KAAK,KAAG,CAAC,CACxD,CAAC,cACRxD,IAAA,CAACZ,UAAU,EAAAiD,QAAA,cACTrC,IAAA,CAACb,KAAK,EACJoD,QAAQ,MACRK,QAAQ,CAAGC,CAAC,EAAK,CACf7B,SAAS,CAAC6B,CAAC,CAACY,MAAM,CAACd,KAAK,CAAC,CAC3B,CAAE,CACFP,SAAS,CAAC,cAAc,CACxBU,IAAI,CAAC,QAAQ,CACba,GAAG,CAAC,GAAG,CACPhB,KAAK,CAAE5B,MAAO,CACd6C,WAAW,CAAC,kBAAkB,CAC9BC,UAAU,CAAGhB,CAAC,EAAK,CACjB,GAAI,CAAC,OAAO,CAACiB,IAAI,CAACjB,CAAC,CAACkB,GAAG,CAAC,CAAE,CACxBlB,CAAC,CAACmB,cAAc,CAAC,CAAC,CACpB,CACF,CAAE,CACH,CAAC,CACQ,CAAC,CACZ,CAAAzC,eAAe,SAAfA,eAAe,kBAAAf,kBAAA,CAAfe,eAAe,CAAG,CAAC,CAAC,UAAAf,kBAAA,iBAApBA,kBAAA,CAAsBgD,QAAQ,IAAK,MAAM,eACxCxD,IAAA,QAAKoC,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBnC,KAAA,CAAChB,KAAK,EAAC+E,KAAK,CAAC,SAAS,CAAA5B,QAAA,EACnBvB,CAAC,CAAC,kCAAkC,CAAC,CACrC,oBAAoB,EAChB,CAAC,CACL,CACN,CAEAG,gBAAgB,eACff,KAAA,MAAGkC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAC,GAAC,CAACd,eAAe,SAAfA,eAAe,YAAAd,kBAAA,CAAfc,eAAe,CAAG,CAAC,CAAC,UAAAd,kBAAA,YAAAC,qBAAA,CAApBD,kBAAA,CAAsB2C,aAAa,UAAA1C,qBAAA,WAAnCA,qBAAA,CAAqCwD,UAAU,cAAGlE,IAAA,CAAAI,SAAA,EAAAiC,QAAA,CAAGvB,CAAC,CAAC,kCAAkC,EAAGS,eAAe,SAAfA,eAAe,kBAAAZ,kBAAA,CAAfY,eAAe,CAAG,CAAC,CAAC,UAAAZ,kBAAA,kBAAAC,qBAAA,CAApBD,kBAAA,CAAsByC,aAAa,UAAAxC,qBAAA,iBAAnCA,qBAAA,CAAqCsD,UAAU,CAAC,CAAC,CAAG,CAAC,cAAGlE,IAAA,CAAAI,SAAA,EAAAiC,QAAA,CAAGvB,CAAC,CAAC,qCAAqC,CAAC,CAAG,CAAC,EAAI,CAC5O,EACE,CACN,EACD,CACH,CACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module"}