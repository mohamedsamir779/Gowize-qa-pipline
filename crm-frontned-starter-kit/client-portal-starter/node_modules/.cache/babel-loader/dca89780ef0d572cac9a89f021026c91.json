{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/king/portal/client-portal-starter/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import CustomPagination from\"components/Common/CustomPagination\";import React,{useEffect,useState}from\"react\";import{MetaTags}from\"react-meta-tags\";import{useDispatch,useSelector}from\"react-redux\";import{Table}from\"reactstrap\";import{fetchNotifications}from\"store/actions\";import{useTranslation}from\"react-i18next\";import CardWrapper from\"components/Common/CardWrapper\";import Loader from\"components/Common/Loader\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function NotificationList(){const{t}=useTranslation();const dispatch=useDispatch();const[limit,setLimit]=useState(10);const{notificationsData,loading}=useSelector(state=>{var _state$notificationsR,_state$notificationsR2,_state$notificationsR3;return{notificationsData:((_state$notificationsR=state.notificationsReducer)===null||_state$notificationsR===void 0?void 0:_state$notificationsR.notifications)||[],loading:((_state$notificationsR2=state.notificationsReducer)===null||_state$notificationsR2===void 0?void 0:_state$notificationsR2.loading)||false,markReadLoading:((_state$notificationsR3=state.notificationsReducer)===null||_state$notificationsR3===void 0?void 0:_state$notificationsR3.markReadLoading)||false};});const{docs:notifications}=notificationsData;const fetchData=function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;dispatch(fetchNotifications({page,limit}));};useEffect(()=>{fetchData();},[]);useEffect(()=>{fetchData(1);},[limit,1]);function dateFormatter(val){let d=new Date(val.createdAt);d=\"\".concat(d.toLocaleDateString(),\", \").concat(d.toLocaleTimeString());return d;}function renderNotificationRows(){return notifications.map((notification,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-top\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-start\",children:notification.recordId}),/*#__PURE__*/_jsx(\"td\",{className:\"text-start\",children:dateFormatter(notification)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-start\",children:notification.title}),/*#__PURE__*/_jsx(\"td\",{className:\"text-start\",children:notification.body})]},index));}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(MetaTags,{children:/*#__PURE__*/_jsx(\"title\",{children:t(\"Notifications\")})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(CardWrapper,{className:\"p-4 glass-card shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-3 mt-4\",children:/*#__PURE__*/_jsxs(Table,{borderless:true,responsive:true,className:\"text-center mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"color-primary\",children:[/*#__PURE__*/_jsx(\"th\",{children:t(\"Record Id\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Date\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Title\")}),/*#__PURE__*/_jsx(\"th\",{children:t(\"Message\")})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[loading&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"100%\",className:\"my-2\",children:/*#__PURE__*/_jsx(Loader,{})})}),!loading&&notifications.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"100%\",className:\"my-2\",children:t(\"No recent notifications.\")})}),!loading&&notifications.length!==0&&renderNotificationRows()]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(CustomPagination,_objectSpread(_objectSpread({},notificationsData),{},{docs:notifications,setSizePerPage:setLimit,sizePerPage:limit,onChange:fetchData}))})]})})]});}export default NotificationList;","map":{"version":3,"names":["CustomPagination","React","useEffect","useState","MetaTags","useDispatch","useSelector","Table","fetchNotifications","useTranslation","CardWrapper","Loader","jsx","_jsx","jsxs","_jsxs","NotificationList","t","dispatch","limit","setLimit","notificationsData","loading","state","_state$notificationsR","_state$notificationsR2","_state$notificationsR3","notificationsReducer","notifications","markReadLoading","docs","fetchData","page","arguments","length","undefined","dateFormatter","val","d","Date","createdAt","concat","toLocaleDateString","toLocaleTimeString","renderNotificationRows","map","notification","index","className","children","recordId","title","body","Fragment","borderless","responsive","colSpan","_objectSpread","setSizePerPage","sizePerPage","onChange"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Authentication/Notifications/NotificationList.js"],"sourcesContent":["import CustomPagination from \"components/Common/CustomPagination\";\nimport React, { useEffect, useState } from \"react\";\nimport { MetaTags } from \"react-meta-tags\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  Table,\n} from \"reactstrap\";\nimport { fetchNotifications } from \"store/actions\";\nimport { useTranslation } from \"react-i18next\";\nimport CardWrapper from \"components/Common/CardWrapper\";\nimport Loader from \"components/Common/Loader\";\n\nfunction NotificationList() {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const [limit, setLimit] = useState(10);\n  const {\n    notificationsData,\n    loading,\n  } = useSelector(\n    (state) => ({\n      notificationsData: state.notificationsReducer?.notifications || [],\n      loading: state.notificationsReducer?.loading || false,\n      markReadLoading: state.notificationsReducer?.markReadLoading || false,\n    })\n  );\n  const {\n    docs: notifications,\n  } = notificationsData;\n\n  const fetchData = (page = 1) => {\n    dispatch(fetchNotifications({\n      page,\n      limit,\n    }));\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    fetchData(1);\n  }, [limit, 1]);\n\n  function dateFormatter(val) {\n    let d = new Date(val.createdAt);\n    d = `${d.toLocaleDateString()}, ${d.toLocaleTimeString()}`;\n    return d;\n  }\n\n  function renderNotificationRows() {\n    return notifications.map((notification, index) =>\n      <tr key={index} className=\"border-top\">\n        <td className=\"text-start\">{notification.recordId}</td>\n        <td className=\"text-start\">{dateFormatter(notification)}</td>\n        <td className=\"text-start\">{notification.title}</td>\n        <td className=\"text-start\">{notification.body}</td>\n      </tr>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <MetaTags>\n        <title>\n          {t(\"Notifications\")}\n        </title>\n      </MetaTags>\n      <div>\n        <CardWrapper className=\"p-4 glass-card shadow\">\n          <div className=\"border rounded-3 mt-4\">\n            <Table borderless responsive className=\"text-center mb-0\" >\n              <thead>\n                <tr className=\"color-primary\">\n                  <th >{t(\"Record Id\")}</th>\n                  <th >{t(\"Date\")}</th>\n                  <th >{t(\"Title\")}</th>\n                  <th >{t(\"Message\")}</th>\n                </tr>\n              </thead>\n              <tbody>\n                {loading && <tr><td colSpan=\"100%\" className=\"my-2\"><Loader /></td></tr>}\n                {!loading && notifications.length === 0 && (\n                  <tr><td colSpan=\"100%\" className=\"my-2\">{t(\"No recent notifications.\")}</td></tr>\n                )}\n                {!loading && notifications.length !== 0 && renderNotificationRows()}\n              </tbody>\n            </Table>\n          </div>\n          <div className=\"mt-4\">\n            <CustomPagination\n              {...notificationsData}\n              docs={notifications}\n              setSizePerPage={setLimit}\n              sizePerPage={limit}\n              onChange={fetchData}\n            />\n          </div>\n        </CardWrapper>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default NotificationList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}