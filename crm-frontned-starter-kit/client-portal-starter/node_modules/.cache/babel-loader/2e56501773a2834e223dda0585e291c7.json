{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/Gowize-qa-pipline/client-portal-starter/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/* eslint-disable no-debugger */import axios from\"axios\";import{defaultPortal}from\"config\";import*as url from\"./url_helper\";export const setUser=user=>{localStorage.setItem(\"PORTAL\",user.defaultPortal||defaultPortal);localStorage.setItem(\"authUser\",JSON.stringify(user));};const getToken=()=>{try{const authUser=JSON.parse(localStorage.getItem(\"authUser\"));return(authUser===null||authUser===void 0?void 0:authUser.token)||\"\";}catch(error){throw new Error(error);}};export const redirectToLogin=function(){return window.location.replace(url.LOGIN);};//apply base url for axios\nconst API_URL=\"\".concat(process.env.REACT_APP_API_CP_DOMAIN,\"/api/v1/cp\");const axiosApi=axios.create({baseURL:API_URL});const setHeaderAuth=()=>{axiosApi.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(getToken());};// axiosApi.interceptors.response.use(\n//   response => response,\n//   error => Promise.reject(error)\n// );\nconst apiErrorHandler=errObj=>{if(errObj.response&&errObj.response.data){if(errObj.response.data.code===401){localStorage.removeItem(\"authUser\");redirectToLogin();}return errObj.response.data;}return errObj;};export async function get(url){let config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};setHeaderAuth();const path=\"\".concat(url);return await axiosApi.get(path,_objectSpread({},config)).then(response=>response.data).catch(err=>apiErrorHandler(err));}export async function post(url,data){let config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};console.log(\"Post body: \",{url,data});setHeaderAuth();const path=\"\".concat(url);console.log({path});return axiosApi.post(path,_objectSpread({},data),_objectSpread({},config)).then(response=>{return response.data;}).catch(err=>apiErrorHandler(err));}export async function patch(url,data){let config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};setHeaderAuth();const path=\"\".concat(url);return axiosApi.patch(path,_objectSpread({},data),_objectSpread({},config)).then(response=>{return response.data;}).catch(err=>apiErrorHandler(err));}export async function put(url,data){let config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};setHeaderAuth();const path=\"\".concat(url);return axiosApi.put(path,_objectSpread({},data),_objectSpread({},config)).then(response=>response.data).catch(err=>apiErrorHandler(err));}export async function del(url){let config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};setHeaderAuth();const path=\"\".concat(url);return await axiosApi.delete(path,_objectSpread({},config)).then(response=>response.data).catch(err=>apiErrorHandler(err));}export async function loginApi(url,data){let config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};setHeaderAuth();const res=await post(url,data,config);if(res&&res.result&&res.result.token){axiosApi.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(res.result.token);}return res;}export async function postFormData(url,data){setHeaderAuth();const path=\"\".concat(url);return axiosApi({method:\"post\",url:path,data,headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(response){return response.data;}).catch(err=>apiErrorHandler(err));}export const GetToken=getToken;","map":{"version":3,"names":["axios","defaultPortal","url","setUser","user","localStorage","setItem","JSON","stringify","getToken","authUser","parse","getItem","token","error","Error","redirectToLogin","window","location","replace","LOGIN","API_URL","concat","process","env","REACT_APP_API_CP_DOMAIN","axiosApi","create","baseURL","setHeaderAuth","defaults","headers","common","apiErrorHandler","errObj","response","data","code","removeItem","get","config","arguments","length","undefined","path","_objectSpread","then","catch","err","post","console","log","patch","put","del","delete","loginApi","res","result","postFormData","method","GetToken"],"sources":["/home/ubuntu/Gowize-qa-pipline/client-portal-starter/src/apis/api_helper.js"],"sourcesContent":["/* eslint-disable no-debugger */\nimport axios from \"axios\";\nimport { defaultPortal } from \"config\";\nimport * as url from \"./url_helper\";\n\nexport const setUser = (user) => {\n  localStorage.setItem(\"PORTAL\", user.defaultPortal || defaultPortal);\n  localStorage.setItem(\"authUser\", JSON.stringify(user));\n};\n\nconst getToken = () => {\n  try {\n    const authUser = JSON.parse(localStorage.getItem(\"authUser\"));\n    return authUser?.token || \"\";\n  } catch (error) {\n    throw new Error(error);\n  }\n};\n\nexport const redirectToLogin = function () {\n  return window.location.replace(url.LOGIN);\n\n};\n\n//apply base url for axios\nconst API_URL = `${process.env.REACT_APP_API_CP_DOMAIN}/api/v1/cp`;\n\nconst axiosApi = axios.create({\n  baseURL: API_URL,\n});\n\nconst setHeaderAuth = () => {\n  axiosApi.defaults.headers.common[\"Authorization\"] = `Bearer ${getToken()}`;\n};\n// axiosApi.interceptors.response.use(\n//   response => response,\n//   error => Promise.reject(error)\n// );\n\nconst apiErrorHandler = (errObj) => {\n  if (errObj.response && errObj.response.data) {\n    if (errObj.response.data.code === 401) {\n      localStorage.removeItem(\"authUser\");\n      redirectToLogin();\n    }\n    return errObj.response.data;\n  }\n  return errObj;\n};\n\nexport async function get(url, config = {}) {\n  setHeaderAuth();\n  const path = `${url}`;\n  return await axiosApi.get(path, { ...config }).then(response => response.data).catch(err => apiErrorHandler(err));\n}\n\nexport async function post(url, data, config = {}) {\n  console.log(\"Post body: \",  \n  {\n    url, \n    data\n   });\n  setHeaderAuth();\n  const path = `${url}`;\n  console.log({ path });\n  return axiosApi\n    .post(path, { ...data }, { ...config })\n    .then(response => {\n      return response.data;\n    }).catch(err => apiErrorHandler(err));\n}\n\nexport async function patch(url, data, config = {}) {\n  setHeaderAuth();\n  const path = `${url}`;\n  return axiosApi\n    .patch(path, { ...data }, { ...config })\n    .then(response => {\n      return response.data;\n    }).catch(err => apiErrorHandler(err));\n}\n\nexport async function put(url, data, config = {}) {\n  setHeaderAuth();\n  const path = `${url}`;\n  return axiosApi\n    .put(path, { ...data }, { ...config })\n    .then(response => response.data).catch(err => apiErrorHandler(err));\n}\n\nexport async function del(url, config = {}) {\n  setHeaderAuth();\n  const path = `${url}`;\n  return await axiosApi\n    .delete(path, { ...config })\n    .then(response => response.data).catch(err => apiErrorHandler(err));\n}\n\nexport async function loginApi(url, data, config = {}) {\n  setHeaderAuth();\n  const res = await post(url, data, config);\n  if (res && res.result && res.result.token) {\n    axiosApi.defaults.headers.common[\"Authorization\"] = `Bearer ${res.result.token}`;\n  }\n  return res;\n}\n\nexport async function postFormData(url, data) {\n  setHeaderAuth();\n  const path = `${url}`;\n  return axiosApi({\n    method: \"post\",\n    url: path,\n    data,\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n  }).then(function (response) {\n    return response.data;\n  }).catch(err => apiErrorHandler(err));\n}\n\nexport const GetToken = getToken;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}