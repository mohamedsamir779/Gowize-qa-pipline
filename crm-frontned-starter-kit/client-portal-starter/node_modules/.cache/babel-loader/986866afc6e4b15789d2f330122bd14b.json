{"ast":null,"code":"import CustomSelect from\"components/Common/CustomSelect\";import Loader from\"components/Common/Loader\";import{getAssetImgSrc}from\"helpers/assetImgSrc\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{fetchWallets}from\"store/actions\";import{Input,InputGroup,InputGroupText}from\"reactstrap\";import{payeeAccounts}from\"../Methods/PerfectMoney\";import{AvField}from\"availity-reactstrap-validation\";import{default as AvFieldSelect}from\"components/Common/AvFieldSelect\";import{max}from\"lodash\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function FiatFormDetails(props){const{t,selectedWallet,amount,setAmount,setSelectedWallet,setAmountValidation,selectedPaymentMethod,setPayeeAccount,setNotes,minDepositAmount}=props;const dispatch=useDispatch();const[amountError,setAmountError]=useState(false);const[minAmount,setMinAmount]=useState(10);const{wallets,loading}=useSelector(state=>state===null||state===void 0?void 0:state.walletReducer);useEffect(()=>{if(amount<10){setAmountError(true);setAmountValidation(true);}else{setAmountError(false);setAmountValidation(false);}},[amount]);// useEffect(() => {\n//   const sWallet = wallets?.find((wallet) => wallet._id === selectedWallet?.value);\n//   const minAmount = parseInt(sWallet?.assetId?.minAmount?.deposit) > minDepositAmount ? parseInt(sWallet?.assetId?.minAmount?.deposit) : minDepositAmount;\n//   setMinAmount(minAmount);\n// }, [selectedWallet]);\nuseEffect(()=>{if((wallets===null||wallets===void 0?void 0:wallets.length)>0){setSelectedWallet({label:wallets[0].asset,value:wallets[0]._id,image:getAssetImgSrc(wallets[0].assetId)});// const minAmount = parseInt(wallets[0].assetId?.minAmount?.deposit) > minDepositAmount ? parseInt(wallets[0].assetId?.minAmount?.deposit) : minDepositAmount;\n// setMinAmount(minAmount);\n}},[wallets]);const loadWallets=()=>{dispatch(fetchWallets());};useEffect(()=>{if(!wallets||(wallets===null||wallets===void 0?void 0:wallets.length)===0){loadWallets({isCrypto:false,isInventory:false});}},[]);const fiatWallets=wallets===null||wallets===void 0?void 0:wallets.map(wallet=>{return{label:wallet.asset,value:wallet._id,image:getAssetImgSrc(wallet.assetId)};});return/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[t(\"Transaction requirements\"),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle ms-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Input,{required:true,onChange:e=>{setAmount(e.target.value);},className:\"form-control\",type:\"number\",min:\"0\",value:amount,placeholder:\"Enter \".concat(minAmount,\"-128341\"),onKeyPress:e=>{if(!/[0-9]/.test(e.key)){e.preventDefault();}}}),/*#__PURE__*/_jsx(InputGroupText,{className:\"custom-input-group-text p-0 border-0\",children:/*#__PURE__*/_jsx(\"div\",{style:{width:\"127px\",height:\"100%\"},children:/*#__PURE__*/_jsx(CustomSelect,{placeholder:\"Select\",name:\"wallets\",isRequired:true,options:fiatWallets,defaultValue:fiatWallets[0],onChange:e=>{setSelectedWallet(e);}})})})]})}),amountError&&/*#__PURE__*/_jsxs(\"p\",{className:\"small text-danger \",children:[\" \",!amount?t(\"Amount is required\"):t(\"Amount must be greater than \"+10),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center fw-bolder mt-4 received-amount\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fs-5\",children:selectedWallet===null||selectedWallet===void 0?void 0:selectedWallet.label}),/*#__PURE__*/_jsx(\"span\",{className:\"fs-1\",children:amount})]}),selectedPaymentMethod===\"PERFECT_MONEY\"?/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(AvFieldSelect,{name:\"payeeAccount\",required:true,options:payeeAccounts===null||payeeAccounts===void 0?void 0:payeeAccounts.map(acc=>{return{label:acc.name,value:acc};}),onChange:e=>{setPayeeAccount(e);},type:\"text\",errorMessage:t(\"Payee account is required\"),validate:{required:{value:true}},label:t(\"Payee Account\")})}):null,selectedPaymentMethod===\"PERFECT_MONEY\"?/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(AvField,{type:\"text\",name:\"notes\",validate:{required:true},label:t(\"Notes\")// disabled={true}\n,onChange:e=>{setNotes(e.target.value);}})}):null]})});}","map":{"version":3,"names":["CustomSelect","Loader","getAssetImgSrc","React","useEffect","useState","useDispatch","useSelector","fetchWallets","Input","InputGroup","InputGroupText","payeeAccounts","AvField","default","AvFieldSelect","max","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FiatFormDetails","props","t","selectedWallet","amount","setAmount","setSelectedWallet","setAmountValidation","selectedPaymentMethod","setPayeeAccount","setNotes","minDepositAmount","dispatch","amountError","setAmountError","minAmount","setMinAmount","wallets","loading","state","walletReducer","length","label","asset","value","_id","image","assetId","loadWallets","isCrypto","isInventory","fiatWallets","map","wallet","className","children","required","onChange","e","target","type","min","placeholder","concat","onKeyPress","test","key","preventDefault","style","width","height","name","isRequired","options","defaultValue","acc","errorMessage","validate"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/components/Deposit/Fiat/FiatFormDetails.js"],"sourcesContent":["import CustomSelect from \"components/Common/CustomSelect\";\nimport Loader from \"components/Common/Loader\";\nimport { getAssetImgSrc } from \"helpers/assetImgSrc\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchWallets } from \"store/actions\";\nimport {\n  Input,\n  InputGroup,\n  InputGroupText\n} from \"reactstrap\";\nimport { payeeAccounts } from \"../Methods/PerfectMoney\";\nimport { AvField } from \"availity-reactstrap-validation\";\nimport { default as AvFieldSelect } from \"components/Common/AvFieldSelect\";\nimport { max } from \"lodash\";\n\nexport default function FiatFormDetails(props) {\n  const {\n    t,\n    selectedWallet,\n    amount,\n    setAmount,\n    setSelectedWallet,\n    setAmountValidation,\n    selectedPaymentMethod,\n    setPayeeAccount,\n    setNotes,\n    minDepositAmount\n  } = props;\n  const dispatch = useDispatch();\n  const [amountError, setAmountError] = useState(false);\n  const [minAmount, setMinAmount] = useState(10);\n\n  const { wallets, loading } = useSelector((state) => state?.walletReducer);\n\n  useEffect(() => {\n    if (amount < 10) {\n      setAmountError(true);\n      setAmountValidation(true);\n    } else {\n      setAmountError(false);\n      setAmountValidation(false);\n    }\n  }, [amount]);\n\n  // useEffect(() => {\n  //   const sWallet = wallets?.find((wallet) => wallet._id === selectedWallet?.value);\n  //   const minAmount = parseInt(sWallet?.assetId?.minAmount?.deposit) > minDepositAmount ? parseInt(sWallet?.assetId?.minAmount?.deposit) : minDepositAmount;\n  //   setMinAmount(minAmount);\n  // }, [selectedWallet]);\n\n  useEffect(() => {\n    if (wallets?.length > 0) {\n      setSelectedWallet({\n        label: wallets[0].asset,\n        value: wallets[0]._id,\n        image: getAssetImgSrc(wallets[0].assetId)\n      });\n      // const minAmount = parseInt(wallets[0].assetId?.minAmount?.deposit) > minDepositAmount ? parseInt(wallets[0].assetId?.minAmount?.deposit) : minDepositAmount;\n      // setMinAmount(minAmount);\n    }\n  }, [wallets]);\n\n  const loadWallets = () => {\n    dispatch(fetchWallets());\n  };\n\n  useEffect(() => {\n    if (!wallets || wallets?.length === 0) {\n      loadWallets({\n        isCrypto: false,\n        isInventory: false,\n      });\n    }\n  }, []);\n\n  const fiatWallets = wallets?.map((wallet) => {\n    return {\n      label: wallet.asset,\n      value: wallet._id,\n      image: getAssetImgSrc(wallet.assetId)\n    };\n  });\n\n  return (\n    <div className=\"w-100\">\n      {loading ? <Loader /> : (\n        <>\n          {t(\"Transaction requirements\")}\n          <i className=\"fas fa-info-circle ms-2\"></i>\n          <div className=\"mt-3\">\n            <InputGroup>\n              <Input\n                required\n                onChange={(e) => {\n                  setAmount(e.target.value);\n                }}\n                className=\"form-control\"\n                type=\"number\"\n                min=\"0\"\n                value={amount}\n                placeholder={`Enter ${minAmount}-128341`}\n                onKeyPress={(e) => {\n                  if (!/[0-9]/.test(e.key)) {\n                    e.preventDefault();\n                  }\n                }}\n              />\n              <InputGroupText className=\"custom-input-group-text p-0 border-0\">\n                <div style={{\n                  width: \"127px\",\n                  height: \"100%\"\n                }}\n                >\n                  <CustomSelect\n                    placeholder=\"Select\"\n                    name=\"wallets\"\n                    isRequired\n                    options={fiatWallets}\n                    defaultValue={fiatWallets[0]}\n                    onChange={(e) => {\n                      setSelectedWallet(e);\n                    }}\n                  >\n                  </CustomSelect>\n                </div>\n              </InputGroupText>\n            </InputGroup>\n          </div>\n          {amountError && (\n            <p className=\"small text-danger \"> {\n              !amount ? t(\"Amount is required\") : t(\"Amount must be greater than \" + 10)\n            } </p>\n          )}\n          <div className=\"text-center fw-bolder mt-4 received-amount\">\n            <span className=\"fs-5\">{selectedWallet?.label}</span>\n            <span className=\"fs-1\">{amount}</span>\n          </div>\n\n          {selectedPaymentMethod === \"PERFECT_MONEY\" ?\n            (<div className=\"mt-3\">\n              <AvFieldSelect\n                name=\"payeeAccount\"\n                required\n                options={payeeAccounts?.map((acc) => {\n                  return {\n                    label: acc.name,\n                    value: acc\n                  };\n                })}\n                onChange={(e) => {\n                  setPayeeAccount(e);\n                }}\n                type=\"text\"\n                errorMessage={t(\"Payee account is required\")}\n                validate={{ required: { value: true } }}\n                label={t(\"Payee Account\")}\n              >\n              </AvFieldSelect>\n            </div>)\n            : null}\n\n          {selectedPaymentMethod === \"PERFECT_MONEY\" ?\n            <div className=\"mt-3\">\n              <AvField\n                type=\"text\"\n                name=\"notes\"\n                validate={{ required: true }}\n                label={t(\"Notes\")}\n                // disabled={true}\n                onChange={(e) => {\n                  setNotes(e.target.value);\n                }}\n              >\n              </AvField>\n            </div>\n            : null}\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}