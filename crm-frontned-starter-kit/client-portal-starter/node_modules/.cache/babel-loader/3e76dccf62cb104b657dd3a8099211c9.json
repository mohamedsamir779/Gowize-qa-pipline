{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Button,Container}from\"reactstrap\";import{useDispatch,connect}from\"react-redux\";import MetaTags from\"react-meta-tags\";import CardWrapper from\"../../../components/Common/CardWrapper\";import CustomTable from\"../../../components/Common/CustomTable\";//i18n\nimport{withTranslation}from\"react-i18next\";import{fetchLogs}from\"store/actions\";import{getLogMessage}from\"helpers/getLogMessages\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Activities(props){const dispatch=useDispatch();const{t,logs,loading,totalDocs}=props;const constLimit=5;const[limit,setLimit]=useState(constLimit);const columns=[{dataField:\"createdAt\",text:props.t(\"Time\"),formatter:val=>{let d=new Date(val.createdAt);d=\"\".concat(d.toLocaleDateString(),\", \").concat(d.toLocaleTimeString());return d;}},{dataField:\"content\",text:props.t(\"Message\"),formatter:val=>getLogMessage(val)}];useEffect(()=>{dispatch(fetchLogs({page:1,limit}));},[limit]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(MetaTags,{children:/*#__PURE__*/_jsx(\"title\",{children:props.t(\"Activities\")})}),/*#__PURE__*/_jsxs(Container,{className:\"mb-5 mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:t(\"Activities\")}),/*#__PURE__*/_jsx(CardWrapper,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(CustomTable,{columns:columns,rows:logs,loading:loading}),(logs===null||logs===void 0?void 0:logs.length)>0&&totalDocs>(logs===null||logs===void 0?void 0:logs.length)&&/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"blue-gradient-color w-100\",onClick:()=>{if(totalDocs>(logs===null||logs===void 0?void 0:logs.length)){setLimit(preValue=>preValue+constLimit);}},children:t(\"Load More\")})]})})]})]})});}const mapStateToProps=state=>({logs:state.logs.logs&&state.logs.logs.docs||[],totalDocs:state.logs.logs.totalDocs,logsLoaded:state.logs.logsLoaded,loading:state.logs.loading});export default connect(mapStateToProps,null)(withTranslation()(Activities));","map":{"version":3,"names":["React","useEffect","useState","Button","Container","useDispatch","connect","MetaTags","CardWrapper","CustomTable","withTranslation","fetchLogs","getLogMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Activities","props","dispatch","t","logs","loading","totalDocs","constLimit","limit","setLimit","columns","dataField","text","formatter","val","d","Date","createdAt","concat","toLocaleDateString","toLocaleTimeString","page","children","className","rows","length","type","onClick","preValue","mapStateToProps","state","docs","logsLoaded"],"sources":["/home/ubuntu/Gowize-qa-pipline/client-portal-starter/src/pages/Crypto/Activities/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Button, Container } from \"reactstrap\";\nimport { useDispatch, connect } from \"react-redux\";\nimport MetaTags from \"react-meta-tags\";\nimport CardWrapper from \"../../../components/Common/CardWrapper\";\nimport CustomTable from \"../../../components/Common/CustomTable\";\n//i18n\nimport { withTranslation } from \"react-i18next\";\nimport { fetchLogs } from \"store/actions\";\nimport { getLogMessage } from \"helpers/getLogMessages\";\n\nfunction Activities(props) {\n  const dispatch = useDispatch();\n  const {\n    t,\n    logs,\n    loading,\n    totalDocs,\n  } = props;\n  const constLimit = 5;\n  const [limit, setLimit] = useState(constLimit);\n\n  const columns = [\n    {\n      dataField: \"createdAt\",\n      text: props.t(\"Time\"),\n      formatter: (val) => {\n        let d = new Date(val.createdAt);\n        d = `${d.toLocaleDateString()}, ${d.toLocaleTimeString()}`;\n        return d;\n      }\n    },\n    {\n      dataField: \"content\",\n      text: props.t(\"Message\"),\n      formatter: (val) => (getLogMessage(val))\n    }, \n  ];\n\n  useEffect(()=>{\n    dispatch(fetchLogs({\n      page: 1,\n      limit,\n    }));\n  }, [limit]);\n\n  return (\n    <>\n      <div className=\"page-content\">\n        <MetaTags>\n          <title>{props.t(\"Activities\")}</title>\n        </MetaTags>\n        <Container className=\"mb-5 mt-5\">\n          <h1 className=\"mb-4\">\n            {t(\"Activities\")}\n          </h1>\n          <CardWrapper>\n            <Container>\n              <CustomTable \n                columns={columns} \n                rows={logs} \n                loading={loading}\n              />\n              {\n                logs?.length > 0 \n                  && totalDocs > logs?.length &&\n                  <Button \n                    type=\"button\" \n                    className='blue-gradient-color w-100' \n                    onClick={() => {\n                      if (totalDocs > logs?.length) {\n                        setLimit(preValue => preValue + constLimit);\n                      }\n                    }}\n                  >\n                    {t(\"Load More\")}\n                  </Button> \n              }\n            </Container>\n          </CardWrapper>\n        </Container>\n      </div>\n    </>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  logs: state.logs.logs && state.logs.logs.docs || [],\n  totalDocs: state.logs.logs.totalDocs,\n  logsLoaded: state.logs.logsLoaded,\n  loading: state.logs.loading,\n});\n\nexport default connect(mapStateToProps, null)(withTranslation()(Activities));"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,MAAM,CAAEC,SAAS,KAAQ,YAAY,CAC9C,OAASC,WAAW,CAAEC,OAAO,KAAQ,aAAa,CAClD,MAAO,CAAAC,QAAQ,KAAM,iBAAiB,CACtC,MAAO,CAAAC,WAAW,KAAM,wCAAwC,CAChE,MAAO,CAAAC,WAAW,KAAM,wCAAwC,CAChE;AACA,OAASC,eAAe,KAAQ,eAAe,CAC/C,OAASC,SAAS,KAAQ,eAAe,CACzC,OAASC,aAAa,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvD,QAAS,CAAAC,UAAUA,CAACC,KAAK,CAAE,CACzB,KAAM,CAAAC,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CACJiB,CAAC,CACDC,IAAI,CACJC,OAAO,CACPC,SACF,CAAC,CAAGL,KAAK,CACT,KAAM,CAAAM,UAAU,CAAG,CAAC,CACpB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAG1B,QAAQ,CAACwB,UAAU,CAAC,CAE9C,KAAM,CAAAG,OAAO,CAAG,CACd,CACEC,SAAS,CAAE,WAAW,CACtBC,IAAI,CAAEX,KAAK,CAACE,CAAC,CAAC,MAAM,CAAC,CACrBU,SAAS,CAAGC,GAAG,EAAK,CAClB,GAAI,CAAAC,CAAC,CAAG,GAAI,CAAAC,IAAI,CAACF,GAAG,CAACG,SAAS,CAAC,CAC/BF,CAAC,IAAAG,MAAA,CAAMH,CAAC,CAACI,kBAAkB,CAAC,CAAC,OAAAD,MAAA,CAAKH,CAAC,CAACK,kBAAkB,CAAC,CAAC,CAAE,CAC1D,MAAO,CAAAL,CAAC,CACV,CACF,CAAC,CACD,CACEJ,SAAS,CAAE,SAAS,CACpBC,IAAI,CAAEX,KAAK,CAACE,CAAC,CAAC,SAAS,CAAC,CACxBU,SAAS,CAAGC,GAAG,EAAMrB,aAAa,CAACqB,GAAG,CACxC,CAAC,CACF,CAEDhC,SAAS,CAAC,IAAI,CACZoB,QAAQ,CAACV,SAAS,CAAC,CACjB6B,IAAI,CAAE,CAAC,CACPb,KACF,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEX,mBACEb,IAAA,CAAAI,SAAA,EAAAuB,QAAA,cACEzB,KAAA,QAAK0B,SAAS,CAAC,cAAc,CAAAD,QAAA,eAC3B3B,IAAA,CAACP,QAAQ,EAAAkC,QAAA,cACP3B,IAAA,UAAA2B,QAAA,CAAQrB,KAAK,CAACE,CAAC,CAAC,YAAY,CAAC,CAAQ,CAAC,CAC9B,CAAC,cACXN,KAAA,CAACZ,SAAS,EAACsC,SAAS,CAAC,WAAW,CAAAD,QAAA,eAC9B3B,IAAA,OAAI4B,SAAS,CAAC,MAAM,CAAAD,QAAA,CACjBnB,CAAC,CAAC,YAAY,CAAC,CACd,CAAC,cACLR,IAAA,CAACN,WAAW,EAAAiC,QAAA,cACVzB,KAAA,CAACZ,SAAS,EAAAqC,QAAA,eACR3B,IAAA,CAACL,WAAW,EACVoB,OAAO,CAAEA,OAAQ,CACjBc,IAAI,CAAEpB,IAAK,CACXC,OAAO,CAAEA,OAAQ,CAClB,CAAC,CAEA,CAAAD,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEqB,MAAM,EAAG,CAAC,EACXnB,SAAS,EAAGF,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEqB,MAAM,gBAC3B9B,IAAA,CAACX,MAAM,EACL0C,IAAI,CAAC,QAAQ,CACbH,SAAS,CAAC,2BAA2B,CACrCI,OAAO,CAAEA,CAAA,GAAM,CACb,GAAIrB,SAAS,EAAGF,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEqB,MAAM,EAAE,CAC5BhB,QAAQ,CAACmB,QAAQ,EAAIA,QAAQ,CAAGrB,UAAU,CAAC,CAC7C,CACF,CAAE,CAAAe,QAAA,CAEDnB,CAAC,CAAC,WAAW,CAAC,CACT,CAAC,EAEJ,CAAC,CACD,CAAC,EACL,CAAC,EACT,CAAC,CACN,CAAC,CAEP,CAEA,KAAM,CAAA0B,eAAe,CAAIC,KAAK,GAAM,CAClC1B,IAAI,CAAE0B,KAAK,CAAC1B,IAAI,CAACA,IAAI,EAAI0B,KAAK,CAAC1B,IAAI,CAACA,IAAI,CAAC2B,IAAI,EAAI,EAAE,CACnDzB,SAAS,CAAEwB,KAAK,CAAC1B,IAAI,CAACA,IAAI,CAACE,SAAS,CACpC0B,UAAU,CAAEF,KAAK,CAAC1B,IAAI,CAAC4B,UAAU,CACjC3B,OAAO,CAAEyB,KAAK,CAAC1B,IAAI,CAACC,OACtB,CAAC,CAAC,CAEF,cAAe,CAAAlB,OAAO,CAAC0C,eAAe,CAAE,IAAI,CAAC,CAACtC,eAAe,CAAC,CAAC,CAACS,UAAU,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}