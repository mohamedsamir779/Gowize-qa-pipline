{"ast":null,"code":"import{connect,useDispatch}from\"react-redux\";import CustomTable from\"../../../components/Common/CustomTable\";import React,{useState,useEffect}from\"react\";import{getDepositsStart}from\"../../../store/crypto/history/actions\";import{Button}from\"reactstrap\";import{BigNumber}from\"bignumber.js\";//i18n\nimport{withTranslation}from\"react-i18next\";import{getAssetImgSrc}from\"helpers/assetImgSrc\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Deposits(props){const[limit,setLimit]=useState(5);const dispatch=useDispatch();// when the filter value changes it fetches data with the new filter\nuseEffect(()=>{var _props$filterObj,_props$filterObj2,_props$filterObj3,_props$filterObj4,_props$filterObj5;dispatch(getDepositsStart({limit:limit,page:1,currency:(_props$filterObj=props.filterObj)===null||_props$filterObj===void 0?void 0:_props$filterObj.currency,status:(_props$filterObj2=props.filterObj)===null||_props$filterObj2===void 0?void 0:_props$filterObj2.status,gateway:(_props$filterObj3=props.filterObj)===null||_props$filterObj3===void 0?void 0:_props$filterObj3.gateway,fromDate:(_props$filterObj4=props.filterObj)===null||_props$filterObj4===void 0?void 0:_props$filterObj4.fromDate,toDate:(_props$filterObj5=props.filterObj)===null||_props$filterObj5===void 0?void 0:_props$filterObj5.toDate}));},[props.filterObj,limit]);const columns=[{dataField:\"favoriteIcon\",text:\"\"},{text:props.t(\"Asset\"),formatter:val=>{var _props$assets;const found=(_props$assets=props.assets)===null||_props$assets===void 0?void 0:_props$assets.find(asset=>{var _val$walletId;return asset.symbol===(val===null||val===void 0?void 0:(_val$walletId=val.walletId)===null||_val$walletId===void 0?void 0:_val$walletId.asset);});return/*#__PURE__*/_jsxs(\"div\",{className:\"balances__company\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"balances__logo\",children:/*#__PURE__*/_jsx(\"img\",{src:getAssetImgSrc(found),alt:\"symbol\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"balances__text\",children:val.walletId?val.walletId.asset:\"\"})]});}},{text:props.t(\"Date\"),dataField:\"createdAt\",formatter:item=>{let d=new Date(item.createdAt);d=\"\".concat(d.toLocaleDateString(),\", \").concat(d.toLocaleTimeString());return d;}},{text:props.t(\"Amount\"),dataField:\"amount\",formatter:val=>{var _val$amount;return val!==null&&val!==void 0&&(_val$amount=val.amount)!==null&&_val$amount!==void 0&&_val$amount.$numberDecimal?val.amount.$numberDecimal:val.amount;}},{text:props.t(\"Gateway\"),dataField:\"gateway\"},{text:props.t(\"Status\"),dataField:\"status\"},{text:props.t(\"On Orders\"),formatter:val=>{var _val$walletId$freezeA;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val!==null&&val!==void 0&&(_val$walletId$freezeA=val.walletId.freezeAmount)!==null&&_val$walletId$freezeA!==void 0&&_val$walletId$freezeA.$numberDecimal?val.walletId.freezeAmount.$numberDecimal:val.walletId.freezeAmount})});}},{text:props.t(\"Available Balance\"),formatter:val=>{var _val$walletId2,_val$walletId2$amount;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val!==null&&val!==void 0&&(_val$walletId2=val.walletId)!==null&&_val$walletId2!==void 0&&(_val$walletId2$amount=_val$walletId2.amount)!==null&&_val$walletId2$amount!==void 0&&_val$walletId2$amount.$numberDecimal?val.walletId.amount.$numberDecimal:val.walletId.amount})});}},{text:props.t(\"Total Balance\"),formatter:val=>{var _val$walletId3,_val$walletId3$amount,_val$walletId$freezeA2;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val.walletId?new BigNumber(val!==null&&val!==void 0&&(_val$walletId3=val.walletId)!==null&&_val$walletId3!==void 0&&(_val$walletId3$amount=_val$walletId3.amount)!==null&&_val$walletId3$amount!==void 0&&_val$walletId3$amount.$numberDecimal?val.walletId.amount.$numberDecimal:val.walletId.amount).plus(new BigNumber(val!==null&&val!==void 0&&(_val$walletId$freezeA2=val.walletId.freezeAmount)!==null&&_val$walletId$freezeA2!==void 0&&_val$walletId$freezeA2.$numberDecimal?val.walletId.freezeAmount.$numberDecimal:val.walletId.freezeAmount)).toString():\"\"})});}}];return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CustomTable,{columns:columns,rows:props.deposits,loading:props.depositLoading}),props.depositsTotalDocs>limit&&/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:()=>{if(props.depositsTotalDocs>limit){setLimit(preValue=>preValue+5);}},className:\"blue-gradient-color w-100\",children:props.t(\"Load More\")})]});}const mapStateToProps=state=>({deposits:state.crypto.historyReducer.deposits||[],depositsTotalDocs:state.crypto.historyReducer.depositsTotalDocs,depositLoading:state.crypto.historyReducer.depositLoading});export default connect(mapStateToProps,null)(withTranslation()(Deposits));","map":{"version":3,"names":["connect","useDispatch","CustomTable","React","useState","useEffect","getDepositsStart","Button","BigNumber","withTranslation","getAssetImgSrc","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Deposits","props","limit","setLimit","dispatch","_props$filterObj","_props$filterObj2","_props$filterObj3","_props$filterObj4","_props$filterObj5","page","currency","filterObj","status","gateway","fromDate","toDate","columns","dataField","text","t","formatter","val","_props$assets","found","assets","find","asset","_val$walletId","symbol","walletId","className","children","src","alt","item","d","Date","createdAt","concat","toLocaleDateString","toLocaleTimeString","_val$amount","amount","$numberDecimal","_val$walletId$freezeA","freezeAmount","_val$walletId2","_val$walletId2$amount","_val$walletId3","_val$walletId3$amount","_val$walletId$freezeA2","plus","toString","rows","deposits","loading","depositLoading","depositsTotalDocs","type","onClick","preValue","mapStateToProps","state","crypto","historyReducer"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/pages/Crypto/History/Deposits.js"],"sourcesContent":["import { connect, useDispatch } from \"react-redux\";\nimport CustomTable from \"../../../components/Common/CustomTable\";\nimport React, { useState, useEffect } from \"react\";\nimport { getDepositsStart } from \"../../../store/crypto/history/actions\";\nimport { Button } from \"reactstrap\";\nimport { BigNumber } from \"bignumber.js\";\n//i18n\nimport { withTranslation } from \"react-i18next\";\nimport { getAssetImgSrc } from \"helpers/assetImgSrc\";\n\nfunction Deposits(props) {\n  const [limit, setLimit] =  useState(5);\n  const dispatch = useDispatch();\n\n  // when the filter value changes it fetches data with the new filter\n  useEffect(() => {\n    dispatch(getDepositsStart({\n      limit:limit,\n      page:1,\n      currency: props.filterObj?.currency,\n      status: props.filterObj?.status,\n      gateway: props.filterObj?.gateway,\n      fromDate: props.filterObj?.fromDate,\n      toDate: props.filterObj?.toDate\n    }));\n    \n  }, [props.filterObj, limit]);\n    \n  const columns = [\n    {\n      dataField: \"favoriteIcon\",\n      text: \"\" \n    },\n    {\n      text: props.t(\"Asset\"),\n      formatter: (val) => {\n        const found = props.assets?.find((asset)=>asset.symbol === val?.walletId?.asset);\n        return <div className=\"balances__company\">\n          <div className=\"balances__logo\">\n            <img src={getAssetImgSrc(found)} alt=\"symbol\"></img>\n          </div>\n          <div className=\"balances__text\">{val.walletId ? val.walletId.asset : \"\"}</div>\n        </div>;},\n    },\n    {\n      text: props.t(\"Date\"),\n      dataField: \"createdAt\",\n      formatter: (item) => {\n        let d = new Date(item.createdAt);\n        d = `${d.toLocaleDateString()}, ${d.toLocaleTimeString()}`;\n        return d;\n      }\n    },\n    {\n      text: props.t(\"Amount\"),\n      dataField: \"amount\",\n      formatter: (val)=>val?.amount?.$numberDecimal ? val.amount.$numberDecimal : val.amount\n    },\n    {\n      text: props.t(\"Gateway\"),\n      dataField: \"gateway\",\n    },\n    {\n      text: props.t(\"Status\"),\n      dataField: \"status\",\n    },\n    {\n      text: props.t(\"On Orders\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val?.walletId.freezeAmount?.$numberDecimal ? val.walletId.freezeAmount.$numberDecimal : val.walletId.freezeAmount}</div>\n      </>\n    },\n    {\n      text: props.t(\"Available Balance\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val?.walletId?.amount?.$numberDecimal ? val.walletId.amount.$numberDecimal : val.walletId.amount}</div>\n                \n      </>\n    },\n    {\n      text: props.t(\"Total Balance\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val.walletId ? \n          new BigNumber(val?.walletId?.amount?.$numberDecimal ? val.walletId.amount.$numberDecimal : val.walletId.amount ).plus(\n            new BigNumber(val?.walletId.freezeAmount?.$numberDecimal ? val.walletId.freezeAmount.$numberDecimal : val.walletId.freezeAmount)).toString() : \"\"}</div>  \n      </>\n    }\n  ];\n   \n  return (\n    <React.Fragment>\n      <CustomTable \n        columns = {columns} \n        rows={props.deposits}\n        loading={props.depositLoading}\n      />\n      { props.depositsTotalDocs > limit &&\n        <Button type=\"button\" onClick = {()=>{\n          if (props.depositsTotalDocs > limit){\n            setLimit(preValue=>preValue + 5);\n          }\n                \n        }} className='blue-gradient-color w-100'>{props.t(\"Load More\")}</Button> \n      }\n    </React.Fragment>\n  );\n}\nconst mapStateToProps = (state)=>(\n  {\n    deposits :state.crypto.historyReducer.deposits || [],\n    depositsTotalDocs : state.crypto.historyReducer.depositsTotalDocs,\n    depositLoading: state.crypto.historyReducer.depositLoading\n  }\n);\nexport default connect(mapStateToProps, null)(withTranslation()(Deposits)); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}