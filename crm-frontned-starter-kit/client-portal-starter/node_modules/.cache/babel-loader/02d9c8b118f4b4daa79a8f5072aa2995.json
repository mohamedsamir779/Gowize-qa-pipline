{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{connect,useDispatch,useSelector}from\"react-redux\";import CustomTable from\"../../../components/Common/CustomTable\";import{getOrdersStart}from\"../../../store/crypto/orders/actions\";import{Button}from\"reactstrap\";//i18n\nimport{withTranslation}from\"react-i18next\";import{getAssetImgSrc}from\"helpers/assetImgSrc\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function Orders(props){const[limit,setLimit]=useState(10);const{assets}=useSelector(state=>state.assets);const dispatch=useDispatch();const columns=[{text:props.t(\"Symbol\"),dataField:\"symbol\",formatter:val=>{const found=assets.find(asset=>{var _val$symbol;return asset.symbol===(val===null||val===void 0?void 0:(_val$symbol=val.symbol)===null||_val$symbol===void 0?void 0:_val$symbol.split(\"/\")[0]);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:getAssetImgSrc(found),width:\"25\",height:\"25\",className:\"me-2\"}),/*#__PURE__*/_jsx(\"span\",{children:val.symbol})]});}},{text:props.t(\"Date\"),dataField:\"createdAt\",formatter:item=>{let d=new Date(item.createdAt);d=\"\".concat(d.toLocaleDateString(),\", \").concat(d.toLocaleTimeString());return d;}},{text:props.t(\"Type\"),dataField:\"type\",formatter:val=>val.type},{dataField:\"side\",text:props.t(\"Side\"),formatter:val=>/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val.side})})},{text:props.t(\"Amount\"),formatter:val=>{var _val$amount;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val!==null&&val!==void 0&&(_val$amount=val.amount)!==null&&_val$amount!==void 0&&_val$amount.$numberDecimal?val.amount.$numberDecimal:val.amount})});}},{dataField:\"paramsData\",text:props.t(\"Tp\"),formatter:val=>/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val.paramsData?val.paramsData.tp:\"\"})})},{dataField:\"paramsData\",text:props.t(\"Sl\"),formatter:val=>/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val.paramsData?val.paramsData.sl:\"\"})})},{dataField:\"price\",text:props.t(\"Price\"),formatter:val=>{var _val$price;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val!==null&&val!==void 0&&(_val$price=val.price)!==null&&_val$price!==void 0&&_val$price.$numberDecimal?val.price.$numberDecimal:val.price})});}},{dataField:\"status\",text:props.t(\"Status\"),formatter:val=>/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"balances__number\",children:val.status})})}];// when the filter value changes it fetches data with the new filter\nuseEffect(()=>{var _props$filterObj,_props$filterObj2,_props$filterObj3,_props$filterObj4,_props$filterObj5,_props$filterObj6;dispatch(getOrdersStart({limit:limit,page:1,side:(_props$filterObj=props.filterObj)===null||_props$filterObj===void 0?void 0:_props$filterObj.side,status:(_props$filterObj2=props.filterObj)===null||_props$filterObj2===void 0?void 0:_props$filterObj2.status,type:(_props$filterObj3=props.filterObj)===null||_props$filterObj3===void 0?void 0:_props$filterObj3.type,symbol:(_props$filterObj4=props.filterObj)===null||_props$filterObj4===void 0?void 0:_props$filterObj4.selectedMarket,fromDate:(_props$filterObj5=props.filterObj)===null||_props$filterObj5===void 0?void 0:_props$filterObj5.fromDate,toDate:(_props$filterObj6=props.filterObj)===null||_props$filterObj6===void 0?void 0:_props$filterObj6.toDate}));},[props.filterObj,limit]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CustomTable,{columns:columns,rows:props.orders,loading:props.ordersLoading}),props.orders.length>0&&/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"blue-gradient-color w-100\",onClick:()=>{if(props.ordersTotalDocs>props.orders.length){setLimit(preValue=>preValue+5);}},children:props.t(\"Load More\")})]});}const mapStateToProps=state=>({orders:state.crypto.orders.orders||[],ordersTotalDocs:state.crypto.orders.ordersTotalDocs,ordersLoading:state.crypto.orders.loading});export default connect(mapStateToProps,null)(withTranslation()(Orders));","map":{"version":3,"names":["React","useState","useEffect","connect","useDispatch","useSelector","CustomTable","getOrdersStart","Button","withTranslation","getAssetImgSrc","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Orders","props","limit","setLimit","assets","state","dispatch","columns","text","t","dataField","formatter","val","found","find","asset","_val$symbol","symbol","split","children","src","width","height","className","item","d","Date","createdAt","concat","toLocaleDateString","toLocaleTimeString","type","side","_val$amount","amount","$numberDecimal","paramsData","tp","sl","_val$price","price","status","_props$filterObj","_props$filterObj2","_props$filterObj3","_props$filterObj4","_props$filterObj5","_props$filterObj6","page","filterObj","selectedMarket","fromDate","toDate","rows","orders","loading","ordersLoading","length","onClick","ordersTotalDocs","preValue","mapStateToProps","crypto"],"sources":["/home/ubuntu/Gowize-qa-pipline/client-portal-starter/src/pages/Crypto/History/Orders.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  connect, useDispatch, useSelector \n} from \"react-redux\";\nimport CustomTable from \"../../../components/Common/CustomTable\";\nimport { getOrdersStart } from \"../../../store/crypto/orders/actions\";\nimport { Button } from \"reactstrap\";\n//i18n\nimport { withTranslation } from \"react-i18next\";\nimport { getAssetImgSrc } from \"helpers/assetImgSrc\";\nfunction Orders(props) {\n  const [limit, setLimit] = useState(10);\n  const { assets } = useSelector(state=>state.assets);\n  const dispatch = useDispatch();\n    \n  const columns = [\n    {\n      text: props.t(\"Symbol\"),\n      dataField: \"symbol\",\n      formatter: (val)=>{\n        const found = assets.find((asset)=>asset.symbol === val?.symbol?.split(\"/\")[0]);\n        return <>\n          <img src={getAssetImgSrc(found)} width=\"25\" height=\"25\" className=\"me-2\"></img>\n          <span>{val.symbol}</span>\n        </>;}\n    },\n    {\n      text: props.t(\"Date\"),\n      dataField: \"createdAt\",\n      formatter: (item) => {\n        let d = new Date(item.createdAt);\n        d = `${d.toLocaleDateString()}, ${d.toLocaleTimeString()}`;\n        return d;\n      }\n    },\n    {\n      text:  props.t(\"Type\"),\n      dataField: \"type\",\n      formatter: (val)=>val.type\n    },\n    {\n      dataField:\"side\",\n      text: props.t(\"Side\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val.side}</div>\n      </>\n    },\n    {\n      text: props.t(\"Amount\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val?.amount?.$numberDecimal ? val.amount.$numberDecimal : val.amount}</div>\n                \n      </>\n    },\n    {\n      dataField:\"paramsData\",\n      text: props.t(\"Tp\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val.paramsData ? val.paramsData.tp : \"\"}</div>\n            \n      </>\n    },\n    {\n      dataField:\"paramsData\",\n      text: props.t(\"Sl\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val.paramsData ? val.paramsData.sl : \"\"}</div>\n            \n      </>\n    },\n    {\n      dataField:\"price\",\n      text: props.t(\"Price\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val?.price?.$numberDecimal ? val.price.$numberDecimal : val.price}</div>\n            \n      </>\n    },\n    {\n      dataField:\"status\",\n      text: props.t(\"Status\"),\n      formatter: (val) => <>\n        <div className=\"balances__number\">{val.status}</div>\n            \n      </>\n    }\n  ];\n\n  // when the filter value changes it fetches data with the new filter\n  useEffect(() => {\n    dispatch(getOrdersStart({\n      limit:limit,\n      page:1,\n      side: props.filterObj?.side,\n      status: props.filterObj?.status,\n      type: props.filterObj?.type,\n      symbol: props.filterObj?.selectedMarket,\n      fromDate: props.filterObj?.fromDate,\n      toDate: props.filterObj?.toDate,\n    }));\n    \n  }, [props.filterObj, limit]);\n\n  return (\n    <React.Fragment>\n      <CustomTable \n        columns={columns} \n        rows={props.orders}\n        loading={props.ordersLoading}\n      />\n      {props.orders.length > 0 &&\n        <Button type=\"button\" className='blue-gradient-color w-100' onClick = {()=>{\n          if (props.ordersTotalDocs > props.orders.length){\n            setLimit(preValue=>preValue + 5);\n          } \n        }\n        }\n        >{props.t(\"Load More\")}</Button>\n      }\n    </React.Fragment>\n  \n  );\n}\nconst mapStateToProps = (state)=>(\n  {\n    orders: state.crypto.orders.orders || [],\n    ordersTotalDocs : state.crypto.orders.ordersTotalDocs,\n    ordersLoading: state.crypto.orders.loading,\n  }\n);\nexport default connect(mapStateToProps, null)(withTranslation()(Orders)); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}