{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Alert}from\"reactstrap\";import{fetchDocsStart}from\"../../../../store/general/documents/actions.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CheckKYC=_ref=>{var _documents$,_documents$2;let{t,setIsFirstStepValid}=_ref;const{documents,loading}=useSelector(state=>state===null||state===void 0?void 0:state.documents);const dispatch=useDispatch();useEffect(()=>{dispatch(fetchDocsStart());},[]);const isApproved=documents.length>=2&&((_documents$=documents[0])===null||_documents$===void 0?void 0:_documents$.status)===\"APPROVED\"&&((_documents$2=documents[1])===null||_documents$2===void 0?void 0:_documents$2.status)===\"APPROVED\";if(loading){return null;}if(documents.length<2){return/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsxs(Alert,{color:\"warning\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"alert-heading\",children:t(\"Documents Required\")}),/*#__PURE__*/_jsx(\"p\",{children:t(\"Please submit all required KYC documents for verification.\")})]})});}const pendingDocs=documents.filter(doc=>doc.status===\"PENDING\");const rejectedDocs=documents.filter(doc=>doc.status===\"REJECTED\");if(rejectedDocs.length>0){return/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsxs(Alert,{color:\"danger\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"alert-heading\",children:t(\"Verification Rejected\")}),/*#__PURE__*/_jsx(\"p\",{children:t(\"Your \".concat(rejectedDocs.map(doc=>doc.type).join(\" and \"),\" \").concat(rejectedDocs.length>1?\"were\":\"was\",\" rejected. Please update \").concat(rejectedDocs.length>1?\"them\":\"it\",\" to proceed.\"))})]})});}if(pendingDocs.length>0){return/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsxs(Alert,{color:\"warning\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"alert-heading\",children:t(\"Verification Pending\")}),/*#__PURE__*/_jsx(\"p\",{children:t(\"Your \".concat(pendingDocs.map(doc=>doc.type).join(\" and \"),\" \").concat(pendingDocs.length>1?\"are\":\"is\",\" under review. Please wait for approval.\"))})]})});}if(isApproved){setIsFirstStepValid(true);}return null;};export default CheckKYC;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Alert","fetchDocsStart","jsx","_jsx","jsxs","_jsxs","CheckKYC","_ref","_documents$","_documents$2","t","setIsFirstStepValid","documents","loading","state","dispatch","isApproved","length","status","className","children","color","pendingDocs","filter","doc","rejectedDocs","concat","map","type","join"],"sources":["/home/ubuntu/king/portal/client-portal-starter/src/components/Deposit/Methods/VisaMaster/CheckKYC.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Alert } from \"reactstrap\";\nimport { fetchDocsStart } from \"../../../../store/general/documents/actions.js\";\n\nconst CheckKYC = ({ t, setIsFirstStepValid }) => {\n  const { documents, loading } = useSelector((state) => state?.documents);\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(fetchDocsStart());\n  }, []);\n\n  const isApproved =\n    documents.length >= 2 &&\n    documents[0]?.status === \"APPROVED\" &&\n    documents[1]?.status === \"APPROVED\";\n\n  if (loading) {\n    return null;\n  }\n  if (documents.length < 2) {\n    return (\n      <div className=\"mt-4\">\n        <Alert color=\"warning\">\n          <h5 className=\"alert-heading\">{t(\"Documents Required\")}</h5>\n          <p>\n            {t(\"Please submit all required KYC documents for verification.\")}\n          </p>\n        </Alert>\n      </div>\n    );\n  }\n  const pendingDocs = documents.filter((doc) => doc.status === \"PENDING\");\n  const rejectedDocs = documents.filter((doc) => doc.status === \"REJECTED\");\n  if (rejectedDocs.length > 0) {\n    return (\n      <div className=\"mt-4\">\n        <Alert color=\"danger\">\n          <h5 className=\"alert-heading\">{t(\"Verification Rejected\")}</h5>\n          <p>\n            {t(\n              `Your ${rejectedDocs.map((doc) => doc.type).join(\" and \")} ${\n                rejectedDocs.length > 1 ? \"were\" : \"was\"\n              } rejected. Please update ${\n                rejectedDocs.length > 1 ? \"them\" : \"it\"\n              } to proceed.`\n            )}\n          </p>\n        </Alert>\n      </div>\n    );\n  }\n  if (pendingDocs.length > 0) {\n    return (\n      <div className=\"mt-4\">\n        <Alert color=\"warning\">\n          <h5 className=\"alert-heading\">{t(\"Verification Pending\")}</h5>\n          <p>\n            {t(\n              `Your ${pendingDocs.map((doc) => doc.type).join(\" and \")} ${\n                pendingDocs.length > 1 ? \"are\" : \"is\"\n              } under review. Please wait for approval.`\n            )}\n          </p>\n        </Alert>\n      </div>\n    );\n  }\n\n  if (isApproved) {\n    setIsFirstStepValid(true);\n  }\n  return null;\n};\n\nexport default CheckKYC;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}