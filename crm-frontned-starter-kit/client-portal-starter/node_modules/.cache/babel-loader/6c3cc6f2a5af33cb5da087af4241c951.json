{"ast":null,"code":"/*!\n* metismenujs - v1.4.0\n* MetisMenu: Collapsible menu plugin with Vanilla-JS\n* https://github.com/onokumus/metismenujs#readme\n*\n* Made by Osman Nuri Okumus <onokumus@gmail.com> (https://github.com/onokumus)\n* Under MIT License\n*/\n!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define(e) : (t = \"undefined\" != typeof globalThis ? globalThis : t || self).MetisMenu = e();\n}(this, function () {\n  \"use strict\";\n\n  const t = {\n      parentTrigger: \"li\",\n      subMenu: \"ul\",\n      toggle: !0,\n      triggerElement: \"a\"\n    },\n    e = {\n      ACTIVE: \"mm-active\",\n      COLLAPSE: \"mm-collapse\",\n      COLLAPSED: \"mm-collapsed\",\n      COLLAPSING: \"mm-collapsing\",\n      METIS: \"metismenu\",\n      SHOW: \"mm-show\"\n    };\n  class s {\n    constructor(e, i) {\n      this.element = s.isElement(e) ? e : document.querySelector(e), this.config = Object.assign(Object.assign({}, t), i), this.disposed = !1, this.triggerArr = [], this.boundEventHandler = this.clickEvent.bind(this), this.init();\n    }\n    static attach(t, e) {\n      return new s(t, e);\n    }\n    init() {\n      const {\n        METIS: t,\n        ACTIVE: s,\n        COLLAPSE: i\n      } = e;\n      this.element.classList.add(t);\n      const n = [...this.element.querySelectorAll(this.config.subMenu)];\n      0 !== n.length && n.forEach(t => {\n        t.classList.add(i);\n        const e = t.closest(this.config.parentTrigger);\n        (null == e ? void 0 : e.classList.contains(s)) ? this.show(t) : this.hide(t);\n        const n = null == e ? void 0 : e.querySelector(this.config.triggerElement);\n        \"true\" !== (null == n ? void 0 : n.getAttribute(\"aria-disabled\")) && (null == n || n.setAttribute(\"aria-expanded\", \"false\"), null == n || n.addEventListener(\"click\", this.boundEventHandler), this.triggerArr.push(n));\n      });\n    }\n    clickEvent(t) {\n      if (!this.disposed) {\n        const e = null == t ? void 0 : t.currentTarget;\n        e && \"A\" === e.tagName && t.preventDefault();\n        const s = e.closest(this.config.parentTrigger),\n          i = null == s ? void 0 : s.querySelector(this.config.subMenu);\n        this.toggle(i);\n      }\n    }\n    update() {\n      this.disposed = !1, this.init();\n    }\n    dispose() {\n      this.triggerArr.forEach(t => {\n        t.removeEventListener(\"click\", this.boundEventHandler);\n      }), this.disposed = !0;\n    }\n    on(t, e, s) {\n      return this.element.addEventListener(t, e, s), this;\n    }\n    off(t, e, s) {\n      return this.element.removeEventListener(t, e, s), this;\n    }\n    emit(t, e) {\n      let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n      const i = new CustomEvent(t, {\n        bubbles: s,\n        detail: e\n      });\n      this.element.dispatchEvent(i);\n    }\n    toggle(t) {\n      const s = t.closest(this.config.parentTrigger);\n      (null == s ? void 0 : s.classList.contains(e.ACTIVE)) ? this.hide(t) : this.show(t);\n    }\n    show(t) {\n      var s;\n      const i = t,\n        {\n          ACTIVE: n,\n          COLLAPSE: l,\n          COLLAPSED: o,\n          COLLAPSING: r,\n          SHOW: c\n        } = e;\n      if (this.isTransitioning || i.classList.contains(r)) return;\n      const a = () => {\n          i.classList.remove(r), i.style.height = \"\", i.removeEventListener(\"transitionend\", a), this.setTransitioning(!1), this.emit(\"shown.metisMenu\", {\n            shownElement: i\n          });\n        },\n        h = i.closest(this.config.parentTrigger);\n      null == h || h.classList.add(n);\n      const d = null == h ? void 0 : h.querySelector(this.config.triggerElement);\n      null == d || d.setAttribute(\"aria-expanded\", \"true\"), null == d || d.classList.remove(o), i.style.height = \"0px\", i.classList.remove(l), i.classList.remove(c), i.classList.add(r);\n      const g = [].slice.call(null === (s = null == h ? void 0 : h.parentNode) || void 0 === s ? void 0 : s.children).filter(t => t !== h);\n      this.config.toggle && g.length > 0 && g.forEach(t => {\n        const e = t.querySelector(this.config.subMenu);\n        e && this.hide(e);\n      }), this.setTransitioning(!0), i.classList.add(l), i.classList.add(c), i.style.height = \"\".concat(i.scrollHeight, \"px\"), this.emit(\"show.metisMenu\", {\n        showElement: i\n      }), i.addEventListener(\"transitionend\", a);\n    }\n    hide(t) {\n      const {\n          ACTIVE: s,\n          COLLAPSE: i,\n          COLLAPSED: n,\n          COLLAPSING: l,\n          SHOW: o\n        } = e,\n        r = t;\n      if (this.isTransitioning || !r.classList.contains(o)) return;\n      this.emit(\"hide.metisMenu\", {\n        hideElement: r\n      });\n      const c = r.closest(this.config.parentTrigger);\n      null == c || c.classList.remove(s);\n      const a = () => {\n        r.classList.remove(l), r.classList.add(i), r.style.height = \"\", r.removeEventListener(\"transitionend\", a), this.setTransitioning(!1), this.emit(\"hidden.metisMenu\", {\n          hiddenElement: r\n        });\n      };\n      r.style.height = \"\".concat(r.getBoundingClientRect().height, \"px\"), r.style.height = \"\".concat(r.offsetHeight, \"px\"), r.classList.add(l), r.classList.remove(i), r.classList.remove(o), this.setTransitioning(!0), r.addEventListener(\"transitionend\", a), r.style.height = \"0px\";\n      const h = null == c ? void 0 : c.querySelector(this.config.triggerElement);\n      null == h || h.setAttribute(\"aria-expanded\", \"false\"), null == h || h.classList.add(n);\n    }\n    setTransitioning(t) {\n      this.isTransitioning = t;\n    }\n    static isElement(t) {\n      return Boolean(t.classList);\n    }\n  }\n  return s;\n});","map":{"version":3,"sources":["../src/constant.ts","../src/metismenujs.ts"],"names":["Default","parentTrigger","subMenu","toggle","triggerElement","ClassName","ACTIVE","COLLAPSE","COLLAPSED","COLLAPSING","METIS","SHOW","MetisMenu","constructor","element","options","this","isElement","document","querySelector","config","Object","disposed","triggerArr","boundEventHandler","clickEvent","bind","init","static","el","opt","classList","add","uls","querySelectorAll","length","forEach","ul","li","closest","contains","show","hide","a","getAttribute","setAttribute","addEventListener","push","evt","target","currentTarget","tagName","preventDefault","update","dispose","arr","removeEventListener","on","evtType","handler","off","emit","evtData","shouldBubble","CustomEvent","bubbles","detail","dispatchEvent","isTransitioning","complete","remove","style","height","setTransitioning","shownElement","eleParentSiblins","slice","call","_a","parentNode","children","filter","c","sibli","sibUl","scrollHeight","showElement","hideElement","hiddenElement","getBoundingClientRect","offsetHeight","Boolean"],"mappings":"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","sourcesContent":["import { IMMOptions } from './interface.js';\n\nexport type MetisMenuEvents =\n  | 'show.metisMenu'\n  | 'shown.metisMenu'\n  | 'hide.metisMenu'\n  | 'hidden.metisMenu';\n\nexport const Default: IMMOptions = {\n  parentTrigger: 'li',\n  subMenu: 'ul',\n  toggle: true,\n  triggerElement: 'a',\n};\n\nexport const ClassName = {\n  ACTIVE: 'mm-active',\n  COLLAPSE: 'mm-collapse',\n  COLLAPSED: 'mm-collapsed',\n  COLLAPSING: 'mm-collapsing',\n  METIS: 'metismenu',\n  SHOW: 'mm-show',\n};\n","/* eslint-disable max-len */\nimport { ClassName, Default, MetisMenuEvents } from \"./constant.js\";\nimport { IMMOptions } from \"./interface.js\";\nimport {\n  CustomEventListener,\n  EventType,\n  SpecificEventListener,\n} from \"./types.js\";\n\nclass MetisMenu {\n  protected config: IMMOptions;\n\n  protected element: Element;\n\n  protected isTransitioning!: boolean;\n\n  protected disposed: boolean;\n\n  protected triggerArr: Array<Element>;\n\n  boundEventHandler: (evt?: Event) => void;\n\n  /**\n   * Creates an instance of MetisMenu.\n   *\n   * @constructor\n   * @param {Element | string} element\n   * @param {IMMOptions} [options]\n   * @memberof MetisMenu\n   */\n\n  constructor(element: Element | string, options?: IMMOptions) {\n    this.element = MetisMenu.isElement(element) ? element : document.querySelector<HTMLElement>(element)!;\n    this.config = { ...Default, ...options };\n    this.disposed = false;\n    this.triggerArr = [];\n    this.boundEventHandler = this.clickEvent.bind(this);\n    this.init();\n  }\n\n  static attach(el: Element, opt?: IMMOptions) {\n    return new MetisMenu(el, opt);\n  }\n\n  /**\n   * @internal\n   */\n  private init(): void {\n    const { METIS, ACTIVE, COLLAPSE } = ClassName;\n    this.element.classList.add(METIS);\n\n    const uls = [...this.element.querySelectorAll<HTMLElement>(this.config.subMenu!)];\n\n    if (uls.length === 0) {\n      return;\n    }\n\n    uls.forEach((ul: Element) => {\n      ul.classList.add(COLLAPSE!);\n      const li = ul.closest(this.config.parentTrigger!);\n\n      if (li?.classList.contains(ACTIVE!)) {\n        this.show(ul as HTMLElement);\n      } else {\n        this.hide(ul);\n      }\n\n      const a = li?.querySelector<HTMLElement>(this.config.triggerElement!);\n      if (a?.getAttribute(\"aria-disabled\") === \"true\") {\n        return;\n      }\n\n      a?.setAttribute(\"aria-expanded\", \"false\");\n\n      a?.addEventListener(\"click\", this.boundEventHandler);\n      this.triggerArr.push(a!);\n    });\n  }\n  /**\n   * @internal\n   */\n\n  private clickEvent(evt?: Event) {\n    if (!this.disposed) {\n      const target = evt?.currentTarget as Element | null;\n      if (target && target.tagName === \"A\") {\n        evt!.preventDefault();\n      }\n\n      const li = target!.closest(this.config.parentTrigger!);\n      const ul = li?.querySelector(this.config.subMenu!);\n      this.toggle(ul!);\n    }\n  }\n\n  update() {\n    this.disposed = false;\n    this.init();\n  }\n\n  dispose() {\n    this.triggerArr.forEach((arr) => {\n      arr.removeEventListener(\"click\", this.boundEventHandler);\n    });\n    this.disposed = true;\n  }\n\n  on<K extends EventType>(\n    evtType: K,\n    handler: SpecificEventListener<K>,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu;\n\n  on<E extends Event>(\n    evtType: E,\n    handler: CustomEventListener<E>,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu;\n\n  on(\n    evtType: MetisMenuEvents,\n    handler: EventListener,\n    options?: AddEventListenerOptions | boolean,\n  ) {\n    this.element.addEventListener(evtType, handler, options);\n    return this;\n  }\n\n  off<K extends EventType>(\n    evtType: K,\n    handler: SpecificEventListener<K>,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu;\n\n  off<E extends Event>(\n    evtType: E,\n    handler: CustomEventListener<E>,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu;\n\n  off(\n    evtType: MetisMenuEvents,\n    handler: EventListener,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu {\n    this.element.removeEventListener(evtType, handler, options);\n    return this;\n  }\n\n  /**\n   * @internal\n   */\n  emit<T extends object>(\n    evtType: string,\n    evtData: T,\n    shouldBubble = false,\n  ): void {\n    const evt = new CustomEvent<T>(evtType, {\n      bubbles: shouldBubble,\n      detail: evtData,\n    });\n    this.element.dispatchEvent(evt);\n  }\n\n  /**\n   * @internal\n   */\n  toggle(ul: Element) {\n    const li = ul.closest(this.config.parentTrigger!);\n    if (li?.classList.contains(ClassName.ACTIVE)) {\n      this.hide(ul);\n    } else {\n      this.show(ul);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  show(el: Element) {\n    const ul = el as HTMLElement;\n    const { ACTIVE, COLLAPSE, COLLAPSED, COLLAPSING, SHOW } = ClassName;\n\n    if (this.isTransitioning || ul.classList.contains(COLLAPSING!)) {\n      return;\n    }\n    const complete = () => {\n      ul.classList.remove(COLLAPSING!);\n      ul.style.height = \"\";\n      ul.removeEventListener(\"transitionend\", complete);\n      this.setTransitioning(false);\n      this.emit(\"shown.metisMenu\", {\n        shownElement: ul,\n      });\n    };\n\n    const li = ul.closest(this.config.parentTrigger!);\n    li?.classList.add(ACTIVE!);\n\n    const a = li?.querySelector<HTMLElement>(this.config.triggerElement!);\n    a?.setAttribute(\"aria-expanded\", \"true\");\n    a?.classList.remove(COLLAPSED!);\n\n    ul.style.height = \"0px\";\n    ul.classList.remove(COLLAPSE!);\n    ul.classList.remove(SHOW!);\n    ul.classList.add(COLLAPSING!);\n    const eleParentSiblins = [].slice.call(li?.parentNode?.children).filter((\n      c,\n    ) => c !== li);\n    if (this.config.toggle && eleParentSiblins.length > 0) {\n      eleParentSiblins.forEach((sibli: Element) => {\n        const sibUl = sibli.querySelector<HTMLElement>(this.config.subMenu!);\n        if (sibUl) {\n          this.hide(sibUl);\n        }\n      });\n    }\n\n    this.setTransitioning(true);\n\n    ul.classList.add(COLLAPSE!);\n    ul.classList.add(SHOW!);\n    ul.style.height = `${ul.scrollHeight}px`;\n    this.emit(\"show.metisMenu\", {\n      showElement: ul,\n    });\n    ul.addEventListener(\"transitionend\", complete);\n  }\n\n  /**\n   * @internal\n   */\n  hide(el: Element) {\n    const { ACTIVE, COLLAPSE, COLLAPSED, COLLAPSING, SHOW } = ClassName;\n    const ul = el as HTMLElement;\n    if (this.isTransitioning || !ul.classList.contains(SHOW!)) {\n      return;\n    }\n    this.emit(\"hide.metisMenu\", {\n      hideElement: ul,\n    });\n\n    const li = ul.closest(this.config.parentTrigger!);\n    li?.classList.remove(ACTIVE!);\n\n    const complete = () => {\n      ul.classList.remove(COLLAPSING!);\n      ul.classList.add(COLLAPSE!);\n      ul.style.height = \"\";\n      ul.removeEventListener(\"transitionend\", complete);\n      this.setTransitioning(false);\n      this.emit(\"hidden.metisMenu\", {\n        hiddenElement: ul,\n      });\n    };\n\n    ul.style.height = `${ul.getBoundingClientRect().height}px`;\n    ul.style.height = `${ul.offsetHeight}px`;\n\n    ul.classList.add(COLLAPSING!);\n    ul.classList.remove(COLLAPSE!);\n    ul.classList.remove(SHOW!);\n    this.setTransitioning(true);\n\n    ul.addEventListener(\"transitionend\", complete);\n\n    ul.style.height = \"0px\";\n\n    const a = li?.querySelector(this.config.triggerElement!);\n    a?.setAttribute(\"aria-expanded\", \"false\");\n    a?.classList.add(COLLAPSED!);\n  }\n\n  /**\n   * @internal\n   */\n  private setTransitioning(isTransitioning: boolean) {\n    this.isTransitioning = isTransitioning;\n  }\n\n  /**\n   * @internal\n   */\n  static isElement(element: unknown): element is Element {\n    return Boolean((element as Element).classList);\n  }\n}\n\nexport default MetisMenu;\n"]},"metadata":{},"sourceType":"script"}